Class,Type,Commit Number,Commit Hash,Code Churn,Lines Added,Lines Deleted,Modified Files,From CBO,To CBO,From DIT,To DIT,From LCOM,To LCOM,From LOC,To LOC,From NOC,To NOC,From RFC,To RFC,From WMC,To WMC,Method Invocations,Refactoring Patterns
io.microraft.impl.handler.AppendEntriesSuccessResponseHandler,class,2 -> 4,e5986d0d194c1ec29e4332ea08b4a709a9936a3d -> fbf5ed462fffe96bf67bb37057d47a5864152403,0,0,0,25,14.0,14.0,4.0,4.0,8.0,8.0,70.0,65.0,0.0,0.0,31.0,32.0,18.0,18.0,updateFollowerIndices[ debug():3 getId():3 localEndpointStr():3 isDebugEnabled():3 responseReceived():2 matchIndex():2 getQueryRound():2 nextIndex():1 getLastLogIndex():1 getFollowerState():1 leaderState():1 queryState():1 getSender():1 tryAck():1 ] checkIfQueryAckNeeded[ getSender():2 leaderState():1 isAckNeeded():1 queryState():1 majority():1 sendAppendEntriesRequest():1 ] AppendEntriesSuccessResponseHandler[  ] handleResponse[ localEndpointStr():3 warn():2 term():2 role():1 debug():1 updateFollowerIndices():1 tryRunQueries():1 checkIfQueryAckNeeded():1 getTerm():1 tryAdvanceCommitIndex():1 trySendAppendRequest():1 ] trySendAppendRequest[ log():1 lastLogOrSnapshotIndex():1 getSender():1 getLastLogIndex():1 commitIndex():1 sendAppendEntriesRequest():1 ] ,"microraft/src/main/java/io/microraft/impl/handler/AppendEntriesSuccessResponseHandler.java: [Add Parameter(6), Remove Parameter(2), Move Package(1), Move Class(1), Extract Superclass(1), Move Method(1)]"
io.microraft.impl.RaftNodeImpl$RaftNodeBuilderImpl,innerclass,2 -> 40,e5986d0d194c1ec29e4332ea08b4a709a9936a3d -> 2987a2d8e875dc6ecf076434af2b0c78d938baf0,0,0,0,120,12.0,12.0,1.0,1.0,21.0,21.0,78.0,70.0,0.0,0.0,8.0,8.0,18.0,18.0,setGroupId[  ] setInitialGroupMembers[ requireNonNull():1 ] setRestoredState[ requireNonNull():1 ] build[  ] setLocalEndpoint[ requireNonNull():1 ] setRuntime[ requireNonNull():1 ] setStateMachine[ requireNonNull():1 ] setModelFactory[ requireNonNull():1 ] setStore[ requireNonNull():1 ] setConfig[ requireNonNull():1 ] ,"microraft/src/main/java/io/microraft/impl/RaftNodeImpl.java: [Change Variable Type(44), Extract Method(30), Change Return Type(12), Extract Variable(12), Change Parameter Type(10), Rename Parameter(10), Rename Variable(8), Replace Pipeline With Loop(6), Add Parameter(6), Move Method(6), Extract And Move Method(6), Remove Parameter(5), Rename Method(4), Move And Rename Class(2), Modify Class Annotation(2), Inline Method(2), Parameterize Variable(2), Add Method Annotation(2), Rename Attribute(2), Move And Rename Method(2), Change Method Access Modifier(2), Move Package(1), Move Class(1), Merge Class(1), Change Attribute Type(1), Remove Method Annotation(1), Remove Method Modifier(1)]"
io.microraft.impl.RaftNodeImpl$HeartbeatTask,innerclass,2 -> 55,e5986d0d194c1ec29e4332ea08b4a709a9936a3d -> ef2790fdc993517ccd2b006643f94f8a8fcf9b79,0,0,0,29,7.0,6.0,2.0,2.0,6.0,3.0,40.0,37.0,0.0,0.0,17.0,15.0,13.0,12.0,resetLeaderAndTriggerPreVote[ leader():1 triggerPreVote():1 ] doRun[ preCandidateState():3 warn():3 resetLeaderAndTriggerPreVote():2 getId():2 leader():1 role():1 isLeaderHeartbeatTimeoutElapsed():1 triggerPreVote():1 demoteToFollowerIfMajorityHeartbeatTimeoutElapsed():1 isKnownMember():1 leaderState():1 committedGroupMembers():1 scheduleHeartbeatTask():1 broadcastAppendEntriesRequest():1 ] HeartbeatTask[  ] triggerPreVote[ run():1 term():1 ] ,"microraft/src/main/java/io/microraft/impl/RaftNodeImpl.java: [Change Variable Type(44), Extract Method(30), Change Return Type(12), Extract Variable(12), Change Parameter Type(10), Rename Parameter(10), Rename Variable(8), Replace Pipeline With Loop(6), Add Parameter(6), Move Method(6), Extract And Move Method(6), Remove Parameter(5), Rename Method(4), Move And Rename Class(2), Modify Class Annotation(2), Inline Method(2), Parameterize Variable(2), Add Method Annotation(2), Rename Attribute(2), Move And Rename Method(2), Change Method Access Modifier(2), Move Package(1), Move Class(1), Merge Class(1), Change Attribute Type(1), Remove Method Annotation(1), Remove Method Modifier(1)]"
io.microraft.impl.local.LocalRaftGroup,class,26 -> 35,2bb70f32a7a8535b1bcd71ea18c8f87687edc108 -> fa028e3ecbeda596a4ab928d0c662b65e30a78f2,899,558,341,28,15.0,18.0,1.0,1.0,625.0,275.0,423.0,320.0,0.0,0.0,63.0,79.0,108.0,68.0,terminateNode[ split():2 shutdown():2 assertNotNull():1 equals():1 getRuntime():1 ] waitUntilLeaderElected[ assertThat():3 getTerm():2 getLocalEndpoint():2 isEqualTo():2 isNotNull():1 getLeaderEndpoint():1 getIndexOf():1 getLeaderNode():1 eventually():1 isShutdown():1 ] getIndexOfRunning[ assertNotNull():1 equals():1 isShutdown():1 ] createMajoritySplitIndexes[ size():1 majority():1 createSplitIndexes():1 ] getNodesExcept[ equals():1 getLocalEndpoint():1 ] getAnyFollowerNode[ getLeaderEndpoint():1 size():1 equals():1 getLocalEndpoint():1 isShutdown():1 ] split[ size():3 split():2 hasSizeBetween():1 binarySearch():1 assertThat():1 removeNode():1 ] allowAllMessagesToMember[ getIndexOfRunning():2 allowAllMessagesToEndpoint():1 discoverNode():1 getNode():1 getRuntime():1 ] isRunning[ assertNotNull():1 equals():1 isShutdown():1 ] getLeaderIndex[ getLeaderEndpoint():1 equals():1 ] merge[ initDiscovery():1 ] createNewLocalRaftRuntime[  ] createSplitIndexes[ size():1 getLeaderIndex():1 ] createNewRaftNode[ arraycopy():6 setGroupId():2 setRuntime():2 start():2 setStore():2 newBuilder():2 setConfig():2 getLocalMember():2 build():2 setStateMachine():2 initDiscovery():2 setInitialGroupMembers():1 apply():1 setRestoredState():1 asList():1 setLocalEndpoint():1 requireNonNull():1 createNewLocalRaftRuntime():1 getLocalEndpoint():1 createNewLocalRaftNodeRuntime():1 ] getRuntime[ getIndexOfRunning():1 getRuntime():1 ] initDiscovery[ size():1 getLocalMember():1 discoverNode():1 equals():1 getLocalEndpoint():1 isShutdown():1 ] getLeaderEndpoint[ getLeaderEndpoint():1 size():1 equals():1 isShutdown():1 ] allowMessagesToMember[ allowMessagesToEndpoint():1 isReachable():1 getIndexOfRunning():1 getRuntime():1 ] getLeaderNode[ getLeaderEndpoint():1 size():1 equals():1 getLocalEndpoint():1 isShutdown():1 ] getNodes[  ] splitMembers[ split():1 getIndexOfRunning():1 ] start[ startWithoutDiscovery():1 initDiscovery():1 ] destroy[ terminate():1 shutdown():1 isShutdown():1 ] getEndpoint[  ] dropMessagesToAll[ dropMessagesToAll():1 getIndexOfRunning():1 getRuntime():1 ] startWithoutDiscovery[ start():1 ] createMinoritySplitIndexes[ size():1 createSplitIndexes():1 minority():1 ] allowMessagesToAll[ isReachable():1 getIndexOfRunning():1 getRuntime():1 allowMessagesToAll():1 ] alterMessagesToMember[ alterMessagesToEndpoint():1 getIndexOfRunning():1 getRuntime():1 ] getFollowerEndpoints[ getLeaderEndpoint():1 equals():1 ] dropAllMessagesToMember[ getIndexOfRunning():2 getNode():1 getRuntime():1 removeNode():1 ] LocalRaftGroup[ setGroupId():4 setRuntime():4 newBuilder():4 setConfig():4 build():4 setStateMachine():4 apply():3 setInitialGroupMembers():2 setRestoredState():2 setStore():2 asList():2 getLocalMember():2 assertNotNull():2 setLocalEndpoint():2 get():2 createNewLocalRaftNodeRuntime():1 ] dropMessagesToMember[ dropMessagesToEndpoint():1 getIndexOfRunning():1 getRuntime():1 ] getIndexOf[ isNotNull():1 equals():1 assertThat():1 ] size[  ] resetAllRulesFrom[ getIndexOfRunning():1 getRuntime():1 resetAllRules():1 ] getNode[ getIndexOfRunning():1 ] createNewLocalRaftNodeRuntime[ get():1 createNewLocalRaftRuntime():1 ] removeAlterMessageRuleToMember[ getIndexOfRunning():1 getRuntime():1 removeAlterMessageRuleToEndpoint():1 ] ,microraft/src/test/java/io/microraft/impl/local/LocalRaftGroup.java: [Extract Method(64)]
io.microraft.impl.task.RaftNodeStatusAwareTask,class,2 -> 56,e5986d0d194c1ec29e4332ea08b4a709a9936a3d -> 9fd7e935a9fef5f5642c8a075daa623e55fc3fa1,0,0,0,17,7.0,7.0,1.0,1.0,3.0,3.0,33.0,33.0,13.0,9.0,13.0,14.0,9.0,9.0,localEndpoint[ getLocalEndpoint():1 ] doRun[  ] RaftNodeStatusAwareTask[ getModelFactory():1 state():1 ] getLogger[ getClass():1 getLogger():1 ] run[ getLogger():2 localEndpointStr():2 getClass():1 debug():1 doRun():1 isTerminal():1 getSimpleName():1 getStatus():1 error():1 ] localEndpointStr[ localEndpointStr():1 ] ,"microraft/src/main/java/io/microraft/impl/task/RaftNodeStatusAwareTask.java: [Extract Method(5), Inline Method(2), Move Package(1), Move Class(1)]"
io.microraft.impl.MembershipChangeTest,class,2 -> 35,e5986d0d194c1ec29e4332ea08b4a709a9936a3d -> fa028e3ecbeda596a4ab928d0c662b65e30a78f2,0,0,0,28,22.0,22.0,2.0,2.0,0.0,0.0,429.0,410.0,0.0,0.0,68.0,73.0,49.0,49.0,when_existingEndpointIsAdded_then_theChangeFails[ get():2 fail():1 replicate():1 changeMembership():1 apply():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 start():1 getLocalEndpoint():1 assertThat():1 ] when_replicatedMembershipChangeIsReverted_then_itCanBeCommittedOnSecondReplicate[ getLocalEndpoint():12 assertThat():6 isEqualTo():5 eventually():4 getCommitIndex():4 get():3 getLeaderEndpoint():3 getIndex():2 getLogIndex():2 getCommittedGroupMembers():2 isNotNull():2 replicate():2 changeMembership():2 apply():2 isNotEqualTo():2 dropMessagesToAll():2 dropMessagesToMember():2 getLastLogOrSnapshotEntry():2 terminateNode():1 waitUntilLeaderElected():1 getNodesExcept():1 createNewRaftNode():1 start():1 isGreaterThan():1 getNode():1 ] when_nonExistingEndpointIsRemoved_then_theChangeFails[ get():3 changeMembership():2 getLocalEndpoint():2 fail():1 getAnyFollowerNode():1 replicate():1 apply():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 start():1 assertThat():1 getCommitIndex():1 ] when_newJoiningNodeFirstReceivesSnapshot_then_itInstallsSnapshot[ getLocalEndpoint():5 assertThat():5 isEqualTo():4 getMembers():4 getEffectiveGroupMembers():3 eventually():2 get():2 getCommitIndex():2 getIndex():1 waitUntilLeaderElected():1 setCommitCountToTakeSnapshot():1 getCommittedGroupMembers():1 getSnapshotEntry():1 getStateMachine():1 createNewRaftNode():1 getRuntime():1 replicate():1 changeMembership():1 apply():1 start():1 isGreaterThan():1 newBuilder():1 dropMessagesToMember():1 size():1 build():1 resetAllRulesFrom():1 ] when_leaderLeaves_then_followersElectNewLeader[ getLocalEndpoint():6 assertThat():3 eventually():2 isFalse():2 isKnownMember():2 get():2 getEffectiveGroupMembers():1 getLeaderEndpoint():1 isNotNull():1 replicate():1 changeMembership():1 terminateNode():1 apply():1 waitUntilLeaderElected():1 start():1 isNotEqualTo():1 getNodesExcept():1 getCommittedGroupMembers():1 ] when_followerAppendsMultipleMembershipChangesAtOnce_then_itCommitsThemCorrectly[ getLocalEndpoint():16 assertThat():8 getLogIndex():6 getCommittedGroupMembers():6 isEqualTo():5 eventually():4 allowAllMessagesToMember():4 dropMessagesToMember():4 get():3 getLeaderEndpoint():3 hasSize():3 getMembers():3 createNewRaftNode():2 getCommitIndex():2 changeMembership():2 getEffectiveGroupMembers():1 getIndex():1 waitUntilLeaderElected():1 getNodesExcept():1 replicate():1 apply():1 start():1 newBuilder():1 build():1 setLeaderHeartbeatPeriodMillis():1 getLastLogOrSnapshotEntry():1 ] destroy[ destroy():1 ] when_thereIsNoCommitInTheCurrentTerm_then_cannotMakeMemberChange[ fail():1 changeMembership():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 get():1 start():1 getLocalEndpoint():1 assertThat():1 ] when_leaderIsSteppingDown_then_itDoesNotAcceptNewAppends[ getLocalEndpoint():6 assertThat():3 dropMessagesToMember():2 isNotDone():1 replicate():1 changeMembership():1 apply():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 start():1 eventually():1 getNodesExcept():1 isDone():1 fail():1 get():1 ] when_newRaftNodeJoinsAfterAnotherNodeLeavesAndSnapshotIsTaken_then_itAppendsMissingEntries[ assertThat():12 isEqualTo():7 getLocalEndpoint():6 getEffectiveGroupMembers():4 getLogIndex():4 get():4 getMembers():4 eventually():3 getCommittedGroupMembers():3 getCommitIndex():3 values():2 replicate():2 changeMembership():2 apply():2 isFalse():2 contains():2 isKnownMember():2 getIndex():1 waitUntilLeaderElected():1 getStatus():1 setCommitCountToTakeSnapshot():1 getNodesExcept():1 asList():1 getSnapshotEntry():1 getStateMachine():1 createNewRaftNode():1 getRuntime():1 start():1 isGreaterThan():1 newBuilder():1 size():1 build():1 ] when_leaderLeaves_then_itIsRemovedFromTheGroupMembers[ getLocalEndpoint():4 assertThat():3 isFalse():2 isKnownMember():2 get():2 getEffectiveGroupMembers():1 replicate():1 changeMembership():1 apply():1 waitUntilLeaderElected():1 start():1 eventually():1 getStatus():1 getNodesExcept():1 getCommittedGroupMembers():1 isEqualTo():1 ] when_membershipChangeRequestIsMadeWithWrongType_then_theChangeFails[ get():2 fail():1 replicate():1 changeMembership():1 apply():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 start():1 getLocalEndpoint():1 assertThat():1 ] when_appendNopEntryOnLeaderElection_then_canMakeMemberChangeAfterNopEntryCommitted[ fail():1 changeMembership():1 waitUntilLeaderElected():1 get():1 start():1 getLocalEndpoint():1 eventually():1 getCause():1 ] when_followerLeaves_then_itIsRemovedFromTheGroupMembers[ getLocalEndpoint():6 assertThat():3 isFalse():2 isKnownMember():2 get():2 getEffectiveGroupMembers():1 replicate():1 changeMembership():1 terminateNode():1 apply():1 waitUntilLeaderElected():1 start():1 eventually():1 getNodesExcept():1 getCommittedGroupMembers():1 asList():1 doesNotContain():1 getResult():1 getMembers():1 ] when_newRaftNodeJoinsAfterAnotherNodeLeaves_then_itAppendsMissingEntries[ assertThat():10 isEqualTo():7 getLocalEndpoint():6 getEffectiveGroupMembers():4 getLogIndex():4 getMembers():4 getCommittedGroupMembers():3 get():3 getCommitIndex():3 eventually():2 changeMembership():2 isFalse():2 isKnownMember():2 waitUntilLeaderElected():1 values():1 getStatus():1 getNodesExcept():1 asList():1 getStateMachine():1 createNewRaftNode():1 getRuntime():1 replicate():1 apply():1 start():1 contains():1 size():1 ] when_newRaftNodeJoins_then_itAppendsMissingEntries[ assertThat():18 isEqualTo():14 getMembers():13 getLogIndex():8 getEffectiveMembers():5 getLocalEndpoint():5 getCommittedMembers():5 getCommitIndex():4 getEffectiveGroupMembers():3 getInitialMembers():3 eventually():2 getCommittedGroupMembers():2 get():2 isTrue():2 contains():2 isKnownMember():2 waitUntilLeaderElected():1 values():1 getStatus():1 getStateMachine():1 createNewRaftNode():1 getRuntime():1 replicate():1 changeMembership():1 getNodes():1 apply():1 start():1 size():1 getResult():1 ] when_leaderLeaves_then_itCannotVoteForCommitOfMemberChange[ getLocalEndpoint():4 replicate():1 changeMembership():1 apply():1 waitUntilLeaderElected():1 start():1 assertThat():1 newBuilder():1 getNodesExcept():1 dropMessagesToMember():1 allTheTime():1 build():1 get():1 isEqualTo():1 setLeaderHeartbeatPeriodMillis():1 getCommitIndex():1 ] when_leaderFailsWhileLeavingRaftGroup_othersCommitTheMembershipChange[ getLocalEndpoint():9 eventually():3 assertThat():3 getLeaderEndpoint():2 replicate():2 apply():2 dropMessagesToMember():2 isNotNull():1 changeMembership():1 getIndex():1 terminateNode():1 waitUntilLeaderElected():1 start():1 isNotEqualTo():1 isFalse():1 getNodesExcept():1 getCommittedGroupMembers():1 isKnownMember():1 get():1 getNode():1 isEqualTo():1 getLastLogOrSnapshotEntry():1 ] ,"microraft/src/test/java/io/microraft/impl/MembershipChangeTest.java: [Change Thrown Exception Type(28), Change Variable Type(24), Rename Variable(16), Move Package(1), Move Class(1), Rename Method(1), Extract Superclass(1)]"
io.microraft.model.impl.log.DefaultSnapshotEntryOrBuilder,class,63 -> 81,68070fd295c73d2c01f27bb744b44b1cbe9ecbda -> 65fbc632fc094c16e2f095a918f7a90476f6d5f6,0,0,0,60,7.0,7.0,2.0,2.0,3.0,0.0,42.0,35.0,0.0,0.0,3.0,3.0,10.0,9.0,getGroupMembersLogIndex[  ] setSnapshotChunks[  ] build[ requireNonNull():1 ] setIndex[  ] setGroupMembersLogIndex[  ] setGroupMembers[  ] toString[  ] getSnapshotChunkCount[ size():1 getOperation():1 ] getGroupMembers[  ] setTerm[  ] ,"microraft/src/main/java/io/microraft/model/impl/log/DefaultSnapshotEntryOrBuilder.java: [Move Method(5), Rename Class(1)]"
io.microraft.impl.state.RaftState,class,2 -> 40,e5986d0d194c1ec29e4332ea08b4a709a9936a3d -> 2987a2d8e875dc6ecf076434af2b0c78d938baf0,12,5,7,120,16.0,16.0,1.0,1.0,630.0,630.0,243.0,241.0,0.0,0.0,52.0,53.0,64.0,64.0,leader[ getLeaderEndpoint():1 withLeader():1 ] lastApplied[  ] preCandidateState[  ] role[  ] log[  ] RaftState[ requireNonNull():3 restore():2 getIndex():2 isNonInitial():1 getGroupMembersLogIndex():1 getInitialMembers():1 getTerm():1 getSnapshotEntry():1 getLocalEndpoint():1 create():1 getVotedEndpoint():1 getGroupMembers():1 getLogEntries():1 ] groupId[  ] commitGroupMembers[  ] snapshotChunkCollector[ getSnapshotIndex():4 ] initLeadershipTransfer[ contains():1 getTerm():1 andThen():1 getMembers():1 ] votedEndpoint[ getVotedEndpoint():1 ] updateGroupMembers[ filter():2 stream():2 forEach():2 add():1 contains():1 remoteMembers():1 isKnownMember():1 lastLogOrSnapshotIndex():1 getLogIndex():1 remove():1 ] members[ getMembers():1 ] committedGroupMembers[  ] create[ create():1 ] term[ getTerm():1 ] majority[ majority():1 ] effectiveGroupMembers[  ] init[ persistInitialMembers():1 open():1 getMembers():1 ] termState[  ] completeLeadershipTransfer[ complete():1 ] initialMembers[  ] restore[ restore():1 ] memberCount[ memberCount():1 ] store[  ] grantVote[ grantVote():1 persistTerm():1 ] toLeader[ leader():1 remoteMembers():1 lastLogOrSnapshotIndex():1 ] revertGroupMembers[  ] leadershipTransferState[  ] localEndpoint[  ] toFollower[ completeLeadershipTransfer():1 setTerm():1 persistTerm():1 ] remoteMembers[ remoteMembers():1 ] toCandidate[ grantVote():2 majority():1 term():1 setTerm():1 ] isKnownMember[ isKnownMember():1 ] leaderState[  ] candidateState[  ] initPreCandidateState[ majority():1 grantVote():1 ] restoreGroupMembers[ getLogIndex():2 ] commitIndex[  ] setTerm[ switchTo():1 ] persistTerm[ term():1 votedEndpoint():1 persistTerm():1 ] ,"microraft/src/main/java/io/microraft/impl/state/RaftState.java: [Change Return Type(8), Change Variable Type(6), Change Attribute Type(3), Rename Method(2), Change Parameter Type(2), Remove Parameter Modifier(2), Rename Parameter(2), Add Parameter(2), Extract And Move Method(2), Move Package(1), Move Class(1), Add Attribute Modifier(1), Change Method Access Modifier(1), Rename Attribute(1), Extract Class(1)] microraft/src/test/java/io/microraft/impl/state/RaftStateTest.java: [Move Package(1), Move Class(1)]"
io.microraft.impl.LeadershipTransferTest,class,2 -> 7,e5986d0d194c1ec29e4332ea08b4a709a9936a3d -> c636857fb9cd1e69040ad32c2faffa75b56454e3,0,0,0,15,16.0,16.0,2.0,2.0,0.0,0.0,193.0,193.0,0.0,0.0,25.0,24.0,24.0,24.0,when_sameLeadershipTransferTriggeredMultipleTimes_then_leadershipTransferSucceeds[ getLocalEndpoint():7 get():3 transferLeadership():2 dropMessagesToMember():1 replicate():1 allowAllMessagesToMember():1 waitUntilLeaderElected():1 start():1 getNodesExcept():1 ] when_leadershipTransferTriggeredDuringMembershipChange_then_leadershipTransferFails[ getLocalEndpoint():7 dropMessagesToMember():2 get():2 toMillis():2 replicate():1 changeMembership():1 transferLeadership():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 start():1 assertThat():1 newBuilder():1 getNodesExcept():1 build():1 setLeaderHeartbeatTimeoutMillis():1 setLeaderHeartbeatPeriodMillis():1 ] when_leadershipTransferCompleted_then_oldLeaderCannotReplicate[ waitUntilLeaderElected():2 get():2 getLocalEndpoint():2 assertThat():2 replicate():1 transferLeadership():1 hasCauseInstanceOf():1 isNotSameAs():1 start():1 getNodesExcept():1 ] when_leaderTransfersLeadershipToItself_then_leadershipTransferSucceeds[ transferLeadership():1 waitUntilLeaderElected():1 get():1 start():1 getLocalEndpoint():1 ] destroy[ destroy():1 ] when_leadershipTransferTriggeredDuringNoOperationCommitted_then_leadershipTransferSucceeds[ assertThat():3 waitUntilLeaderElected():2 getTerm():2 getLocalEndpoint():2 transferLeadership():1 get():1 isNotSameAs():1 start():1 isGreaterThan():1 getRole():1 getNodesExcept():1 isEqualTo():1 ] when_targetEndpointCannotCatchesUpTheLeaderInTime_then_leadershipTransferFails[ getLocalEndpoint():4 get():2 dropMessagesToMember():1 replicate():1 transferLeadership():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 start():1 assertThat():1 getNodesExcept():1 ] when_leaderTransfersLeadershipToNonGroupMemberEndpoint_then_leadershipTransferFails[ transferLeadership():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 get():1 start():1 newEndpoint():1 assertThat():1 ] when_leadershipTransferTriggeredDuringOperationsCommitted_then_leadershipTransferSucceeds[ assertThat():3 waitUntilLeaderElected():2 getTerm():2 get():2 getLocalEndpoint():2 replicate():1 transferLeadership():1 isNotSameAs():1 start():1 isGreaterThan():1 getRole():1 getNodesExcept():1 isEqualTo():1 ] when_newOperationIsReplicatedDuringLeadershipTransfer_then_replicateFails[ getLocalEndpoint():4 replicate():2 get():2 dropMessagesToMember():1 transferLeadership():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 start():1 assertThat():1 getNodesExcept():1 ] when_thereAreInflightOperationsDuringLeadershipTransfer_then_inflightOperationsAreCommitted[ getLocalEndpoint():10 dropMessagesToMember():2 allowAllMessagesToMember():2 waitUntilLeaderElected():2 get():2 replicate():1 transferLeadership():1 isNotSameAs():1 start():1 assertThat():1 getNodesExcept():1 ] when_leaderTransfersLeadershipToNull_then_leadershipTransferFails[ transferLeadership():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 get():1 start():1 assertThat():1 ] when_leadershipTransferTriggeredOnFollower_then_leadershipTransferFails[ getLocalEndpoint():2 transferLeadership():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 get():1 start():1 assertThat():1 getNodesExcept():1 ] when_secondLeadershipTransfersTriggeredForDifferentEndpoint_then_secondLeadershipTransferFails[ getLocalEndpoint():5 transferLeadership():2 get():2 dropMessagesToMember():1 replicate():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 start():1 assertThat():1 getNodesExcept():1 ] when_leadershipTransferCompleted_then_newLeaderCanCommit[ waitUntilLeaderElected():2 get():2 getLocalEndpoint():2 replicate():1 transferLeadership():1 isNotSameAs():1 start():1 assertThat():1 getNodesExcept():1 ] ,"microraft/src/test/java/io/microraft/impl/LeadershipTransferTest.java: [Inline Variable(22), Change Variable Type(8), Move Package(1), Move Class(1), Extract Superclass(1)]"
io.microraft.impl.RaftNodeImpl,class,219 -> 221,bf415940d4dc9d82bea4e178a019fe42e14bc6b1 -> 8cef993357980797970c0979681e0e78aa1a4732,0,0,0,13,92.0,93.0,1.0,1.0,203.0,211.0,1065.0,1068.0,0.0,0.0,326.0,324.0,263.0,264.0,newReport[ effectiveGroupMembers():1 newLogReport():1 localEndpoint():1 termState():1 initialMembers():1 role():1 committedGroupMembers():1 ] leader[ leader():1 onRaftNodeStateChange():1 ] installSnapshot[ getIndex():7 commitIndex():2 info():2 onRaftNodeStateChange():2 lastApplied():1 leader():1 installSnapshot():1 getGroupMembersLogIndex():1 log():1 snapshotChunkCollector():1 setSnapshot():1 toList():1 invalidateFuturesUntil():1 setStatus():1 newIndeterminateStateException():1 flush():1 stream():1 getOperation():1 restoreGroupMembers():1 collect():1 map():1 getGroupMembers():1 ] getModelFactory[  ] getInitialMembers[ initialMembers():1 ] getStatus[  ] getGroupId[  ] tryRunQueries[ commitIndex():2 getKey():1 debug():1 queryRound():1 queryCount():1 isMajorityAckReceived():1 queries():1 getValue():1 size():1 leaderState():1 queryState():1 reset():1 majority():1 isDebugEnabled():1 runQuery():1 ] demoteToFollowerIfMajorityHeartbeatTimeoutElapsed[ newIndeterminateStateException():1 warn():1 toFollower():1 log():1 leaderState():1 majorityAppendEntriesResponseTimestamp():1 isLeaderHeartbeatTimeoutElapsed():1 majority():1 term():1 lastLogOrSnapshotIndex():1 invalidateFuturesUntil():1 ] getEffectiveMembers[ effectiveGroupMembers():1 ] findQuorumMatchIndex[ matchIndices():1 flushedLogIndex():1 debug():1 isKnownMember():1 log():1 leaderState():1 getLocalEndpoint():1 lastLogOrSnapshotIndex():1 toString():1 sort():1 isDebugEnabled():1 copyOf():1 ] commitEntries[ tryRunQueries():2 applyLogEntries():2 debug():1 isDebugEnabled():1 commitIndex():1 broadcastAppendEntriesRequest():1 ] getLocalEndpoint[ localEndpoint():1 ] submitLeaderFlushTask[ submit():1 flushTaskSubmitted():1 isFlushTaskSubmitted():1 ] state[  ] runQuery[ fail():2 commitIndex():2 runOperation():1 leader():1 complete():1 ] broadcastAppendEntriesRequest[ remoteMembers():1 sendAppendEntriesRequest():1 ] tryAdvanceCommitIndex[ term():2 debug():1 getLogEntry():1 findQuorumMatchIndex():1 log():1 commitEntries():1 getTerm():1 isDebugEnabled():1 commitIndex():1 ] getLeaderEndpoint[ leader():1 ] newLogReport[ log():2 lastLogOrSnapshotEntry():1 snapshotEntry():1 commitIndex():1 ] applyRestoredRaftGroupOps[ getOperation():4 getIndex():3 setStatus():2 updateGroupMembers():1 getLogEntry():1 log():1 lastLogOrSnapshotIndex():1 applyLogEntries():1 commitIndex():1 getMembers():1 ] changeMembership[ executeIfRunning():1 ] getLeaderElectionTimeoutMs[ getLeaderElectionTimeoutMillis():2 getRandomInt():1 ] RaftNodeImpl[ requireNonNull():14 getCommitCountToTakeSnapshot():4 max():2 getId():2 getMaxUncommittedLogEntryCount():2 restore():1 getLocalEndpoint():1 create():1 ] appendNewTermEntry[ log():1 build():1 createLogEntryBuilder():1 setIndex():1 setOperation():1 term():1 lastLogOrSnapshotIndex():1 appendEntry():1 getNewTermOperation():1 setTerm():1 ] query[ executeIfRunning():1 ] isLeaderHeartbeatTimeoutElapsed[ getLeaderHeartbeatTimeoutMillis():2 isLeaderHeartbeatTimeoutElapsed():1 currentTimeMillis():1 ] leaderHeartbeatReceived[ max():1 currentTimeMillis():1 ] handle[ warn():1 isTerminal():1 execute():1 ] invalidateFuturesUntil[ next():1 getKey():1 fail():1 getValue():1 warn():1 iterator():1 entrySet():1 hasNext():1 remove():1 ] applyLogEntry[ getIndex():6 setStatus():4 effectiveGroupMembers():2 getLogIndex():2 runOperation():1 debug():1 completeFuture():1 commitGroupMembers():1 getEndpoint():1 error():1 updateGroupMembers():1 equals():1 committedGroupMembers():1 getLocalEndpoint():1 getOperation():1 getMode():1 onRaftGroupTerminated():1 getMembers():1 ] executeIfRunning[ fail():1 isTerminal():1 newNotLeaderException():1 execute():1 ] toLeader[ appendNewTermEntry():1 toLeader():1 broadcastAppendEntriesRequest():1 onRaftNodeStateChange():1 ] checkLeadershipTransfer[ fail():4 newNotLeaderException():2 getStatus():2 contains():1 leaderState():1 isTerminal():1 getCommittedMembers():1 getMembers():1 ] newIndeterminateStateException[  ] sendSnapshotChunks[ getIndex():6 debug():3 getId():2 getGroupMembersLogIndex():1 setGroupId():1 log():1 setSnapshotIndex():1 toList():1 error():1 setQueryRound():1 getGroupId():1 getFollowerState():1 emptyList():1 setSnapshotChunks():1 stream():1 getLocalEndpoint():1 setGroupMembersLogIndex():1 term():1 map():1 queryRound():1 setSnapshotTerm():1 getTerm():1 createInstallSnapshotRequestBuilder():1 setGroupMembers():1 responseReceived():1 setMaxRequestBackoff():1 build():1 leaderState():1 snapshotEntry():1 setSenderLeader():1 getOperation():1 setTotalSnapshotChunkCount():1 setSender():1 collect():1 getSnapshotChunkCount():1 getGroupMembers():1 send():1 scheduleLeaderBackoffResetTask():1 setTerm():1 ] terminate[ setStatus():3 commitIndex():3 isTerminal():2 newNotLeaderException():2 completeNull():2 fail():2 completeLeadershipTransfer():1 error():1 execute():1 completedFuture():1 leaderState():1 queryState():1 invalidateFuturesFrom():1 ] invalidateFuturesFrom[ next():1 getKey():1 fail():1 getValue():1 warn():1 iterator():1 entrySet():1 hasNext():1 newNotLeaderException():1 remove():1 ] scheduleLeaderBackoffResetTask[ getLeaderBackoffDurationMillis():1 schedule():1 requestBackoffResetTaskScheduled():1 isRequestBackoffResetTaskScheduled():1 ] send[ send():1 ] canReplicateNewOperation[ effectiveGroupMembers():1 log():1 getTerm():1 isTerminal():1 lastLogOrSnapshotIndex():1 leadershipTransferState():1 getLogEntry():1 isKnownMember():1 snapshotEntry():1 getLocalEndpoint():1 term():1 getMaxUncommittedLogEntryCount():1 commitIndex():1 snapshotIndex():1 ] initLeadershipTransfer[ checkLeadershipTransfer():1 warn():1 transferLeadership():1 equals():1 getLocalEndpoint():1 initLeadershipTransfer():1 completeNull():1 commitIndex():1 ] getReport[ newReport():1 fail():1 complete():1 executeIfRunning():1 commitIndex():1 ] applyLogEntries[ lastApplied():3 role():2 lastLogOrSnapshotIndex():2 tryTakeSnapshot():1 getLogEntry():1 log():1 error():1 applyLogEntry():1 commitIndex():1 ] terminateGroup[ replicate():1 build():1 createTerminateRaftGroupOpBuilder():1 ] sendAppendEntriesRequest[ emptyList():4 snapshotIndex():4 setGroupId():2 getIndex():2 getAppendEntriesRequestBatchSize():2 setQueryRound():2 getGroupId():2 getLocalEndpoint():2 size():2 isDebugEnabled():2 send():2 scheduleLeaderBackoffResetTask():2 setTerm():2 getId():2 min():2 term():2 containsLogEntry():2 debug():2 getLogEntriesBetween():2 queryRound():2 getTerm():2 build():2 snapshotEntry():2 setSender():2 getGroupMembersLogIndex():1 submitLeaderFlushTask():1 setRequestBackoff():1 createInstallSnapshotRequestBuilder():1 lastLogOrSnapshotIndex():1 setLogEntries():1 setPreviousLogTerm():1 setTotalSnapshotChunkCount():1 setCommitIndex():1 setPreviousLogIndex():1 getGroupMembers():1 commitIndex():1 flushedLogIndex():1 log():1 createAppendEntriesRequestBuilder():1 setSnapshotIndex():1 nextIndex():1 getFollowerState():1 setSnapshotChunks():1 get():1 setGroupMembersLogIndex():1 isRequestBackoffSet():1 setSnapshotTerm():1 setGroupMembers():1 setMaxRequestBackoff():1 getLogEntry():1 leaderState():1 setSenderLeader():1 matchIndex():1 getSnapshotChunkCount():1 ] localEndpointStr[  ] tryTakeSnapshot[ log():2 getLogIndex():2 stream():2 setGroupMembersLogIndex():2 setGroupMembers():2 filter():2 build():2 setIndex():2 setTerm():2 getMembers():2 leader():1 takeSnapshot():1 isTerminal():1 findFirst():1 setSnapshotChunkIndex():1 setSnapshot():1 setSnapshotChunks():1 noneMatch():1 committedGroupMembers():1 get():1 map():1 snapshotIndex():1 onRaftNodeStateChange():1 add():1 debug():1 setSnapshotChunkCount():1 getTerm():1 store():1 getCommitCountToTakeSnapshot():1 orElse():1 sorted():1 matchIndices():1 getLogEntry():1 size():1 createSnapshotChunkBuilder():1 leaderState():1 setOperation():1 createSnapshotEntryBuilder():1 isDebugEnabled():1 persistSnapshotChunk():1 commitIndex():1 ] updateGroupMembers[ updateGroupMembers():1 onRaftNodeStateChange():1 ] tryAckQueryRound[ debug():1 tryRunQueries():1 leaderState():1 queryState():1 getId():1 isDebugEnabled():1 tryAck():1 localEndpointStr():1 ] scheduleHeartbeatTask[ schedule():1 getLeaderHeartbeatPeriodMillis():1 ] onRaftNodeStateChange[ append():22 getTerm():2 equals():2 getMembers():2 newReport():1 leader():1 role():1 forEach():1 groupId():1 getId():1 getLogIndex():1 error():1 getCommittedMembers():1 size():1 getLocalEndpoint():1 toString():1 onRaftNodeReport():1 info():1 ] replicate[ executeIfRunning():1 ] transferLeadership[ getId():4 endpoint():4 log():2 debug():2 warn():2 schedule():2 lastLogOrSnapshotEntry():1 setGroupId():1 getIndex():1 initLeadershipTransfer():1 sendAppendEntriesRequest():1 getGroupId():1 retryDelay():1 getFollowerState():1 getLocalEndpoint():1 term():1 setLastLogIndex():1 createTriggerLeaderElectionRequestBuilder():1 retry():1 info():1 completeLeadershipTransfer():1 getLeaderElectionTimeoutMs():1 getTerm():1 lastLogOrSnapshotIndex():1 responseReceived():1 executeIfRunning():1 leadershipTransferState():1 build():1 leaderState():1 tryCount():1 setSender():1 send():1 commitIndex():1 setTerm():1 setLastLogTerm():1 ] completeFuture[ fail():1 complete():1 remove():1 ] getTerm[ termState():1 ] scheduleRaftStateSummaryPublishTask[ getRaftNodeReportPublishPeriodSecs():1 schedule():1 toMillis():1 ] start[ fail():3 execute():2 setStatus():2 info():2 init():1 memberCount():1 scheduleRaftStateSummaryPublishTask():1 error():1 completeNull():1 initRestoredState():1 members():1 scheduleHeartbeatTask():1 commitIndex():1 ] canQueryLinearizable[ getLogEntry():1 log():1 snapshotEntry():1 leaderState():1 getTerm():1 isTerminal():1 queryState():1 term():1 queryCount():1 getMaxUncommittedLogEntryCount():1 commitIndex():1 snapshotIndex():1 ] newNotLeaderException[ getLeaderEndpoint():1 getLocalEndpoint():1 isTerminal():1 ] getCommittedMembers[ committedGroupMembers():1 ] preCandidate[ getIndex():2 getTerm():2 term():2 lastLogOrSnapshotEntry():1 setGroupId():1 getLeaderElectionTimeoutMs():1 log():1 forEach():1 createPreVoteRequestBuilder():1 getGroupId():1 schedule():1 remoteMembers():1 build():1 getLocalEndpoint():1 initPreCandidateState():1 setLastLogIndex():1 setSender():1 send():1 setTerm():1 setLastLogTerm():1 info():1 ] setStatus[ warn():1 isTerminal():1 info():1 onRaftNodeStateChange():1 ] revertGroupMembers[ revertGroupMembers():1 onRaftNodeStateChange():1 ] schedule[ schedule():1 ] newCannotReplicateException[ getLeaderEndpoint():1 isTerminal():1 ] toFollower[ fail():1 toFollower():1 leaderState():1 queryState():1 newNotLeaderException():1 onRaftNodeStateChange():1 ] toCandidate[ getIndex():2 getTerm():2 term():2 lastLogOrSnapshotEntry():1 createVoteRequestBuilder():1 setGroupId():1 getLeaderElectionTimeoutMs():1 log():1 forEach():1 getGroupId():1 schedule():1 toCandidate():1 remoteMembers():1 build():1 setSticky():1 getLocalEndpoint():1 setLastLogIndex():1 setSender():1 send():1 setTerm():1 info():1 onRaftNodeStateChange():1 setLastLogTerm():1 ] registerFuture[ put():1 ] initRestoredState[ getIndex():2 info():2 isNonInitial():1 installSnapshot():1 applyRestoredRaftGroupOps():1 log():1 toList():1 stream():1 snapshotEntry():1 getOperation():1 isDebugEnabled():1 collect():1 map():1 onRaftNodeStateChange():1 ] ,"microraft/src/main/java/io/microraft/impl/RaftNodeImpl.java: [Change Variable Type(4), Move Method(4), Rename Parameter(2), Change Method Access Modifier(2), Move Attribute(1)]"
io.microraft.impl.local.InMemoryRaftStore,class,195 -> 208,d97e3e0db7e1027589a78394262bf5b78bab6013 -> 8bec871527991cd727d6454f225d12dc80f62095,97,74,23,19,13.0,11.0,1.0,1.0,17.0,29.0,49.0,90.0,0.0,0.0,23.0,9.0,12.0,24.0,persistLogEntry[ appendEntry():1 ] InMemoryRaftStore[ create():1 ] persistInitialMembers[  ] truncateLogEntriesFrom[ truncateEntriesFrom():1 ] truncateSnapshotChunksUntil[ clear():1 ] flush[  ] toRestoredRaftState[ lastLogOrSnapshotIndex():2 snapshotIndex():2 emptyList():1 getLogEntriesBetween():1 snapshotEntry():1 ] persistSnapshotChunk[ add():1 getGroupMembersLogIndex():1 getIndex():1 getTerm():1 setGroupMembers():1 sort():1 setSnapshot():1 setSnapshotChunks():1 size():1 build():1 setIndex():1 comparingInt():1 setGroupMembersLogIndex():1 getSnapshotChunkCount():1 getGroupMembers():1 setTerm():1 ] close[  ] open[  ] persistTerm[  ] ,"microraft/src/test/java/io/microraft/impl/local/InMemoryRaftStore.java: [Merge Parameter(10), Merge Attribute(6), Add Parameter Annotation(5), Change Parameter Type(4), Rename Parameter(4), Extract Class(4), Move Attribute(2)]"
io.microraft.impl.TerminateRaftGroupTest,class,2 -> 35,e5986d0d194c1ec29e4332ea08b4a709a9936a3d -> fa028e3ecbeda596a4ab928d0c662b65e30a78f2,0,0,0,28,14.0,14.0,2.0,2.0,0.0,0.0,92.0,88.0,0.0,0.0,29.0,31.0,12.0,12.0,when_terminateOpIsCommitted_then_raftNodeIsTerminated[ assertThat():6 get():4 isEqualTo():4 replicate():3 apply():3 hasCauseInstanceOf():2 getStatus():2 fail():2 getCommitIndex():2 waitUntilLeaderElected():1 start():1 eventually():1 terminateGroup():1 getAnyFollowerNode():1 state():1 commitIndex():1 ] when_terminateOpIsAppendedButNotCommitted_then_cannotAppendNewEntry[ getLocalEndpoint():2 fail():1 getAnyFollowerNode():1 replicate():1 apply():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 get():1 start():1 assertThat():1 terminateGroup():1 dropAllMessagesToMember():1 ] when_terminateOpIsTruncated_then_statusIsActive[ getLocalEndpoint():4 getLeaderEndpoint():2 eventually():2 assertThat():2 isNotNull():1 replicate():1 getNodes():1 apply():1 waitUntilLeaderElected():1 splitMembers():1 start():1 isNotEqualTo():1 dropMessagesToAll():1 getStatus():1 getNodesExcept():1 terminateGroup():1 get():1 merge():1 getNode():1 isEqualTo():1 ] destroy[ destroy():1 ] when_terminateOpIsAppended_then_statusIsTerminating[ getLocalEndpoint():2 assertThat():2 getStatus():2 isEqualTo():2 getAnyFollowerNode():1 waitUntilLeaderElected():1 start():1 eventually():1 terminateGroup():1 dropAllMessagesToMember():1 ] ,"microraft/src/test/java/io/microraft/impl/TerminateRaftGroupTest.java: [Move Package(1), Move Class(1), Extract Superclass(1)]"
io.microraft.impl.log.SnapshotChunkCollector,class,2 -> 6,e5986d0d194c1ec29e4332ea08b4a709a9936a3d -> 3767d50e99eb431a51c557c6eb9fc25023813679,97,64,33,17,7.0,5.0,1.0,1.0,9.0,0.0,83.0,105.0,0.0,0.0,26.0,34.0,21.0,27.0,add[ add():2 isEmpty():2 emptyList():1 getIndex():1 requireNonNull():1 comparingInt():1 getSnapshotChunkIndex():1 sort():1 remove():1 ] getGroupMembersLogIndex[  ] SnapshotChunkCollector[ forEach():1 range():1 ] getSnapshotIndex[  ] getSnapshotTerm[  ] buildSnapshotEntry[ setSnapshotChunks():1 size():1 build():1 setIndex():1 setGroupMembers():1 setGroupMembersLogIndex():1 setTerm():1 ] getNextChunks[ add():1 next():1 emptyList():1 iterator():1 size():1 addAll():1 hasNext():1 isSnapshotCompleted():1 remove():1 ] getChunks[  ] isSnapshotCompleted[ isEmpty():1 ] getGroupMembers[  ] getChunkCount[  ] ,"microraft/src/main/java/io/microraft/impl/log/SnapshotChunkCollector.java: [Extract Class(5), Move Method(1), Move Attribute(1)]"
io.microraft.impl.report.RaftNodeReportImpl,class,2 -> 40,e5986d0d194c1ec29e4332ea08b4a709a9936a3d -> 2987a2d8e875dc6ecf076434af2b0c78d938baf0,0,0,0,120,9.0,9.0,1.0,1.0,24.0,24.0,67.0,57.0,0.0,0.0,8.0,8.0,12.0,12.0,getEffectiveMembers[  ] getReason[  ] getInitialMembers[  ] getLog[  ] getTerm[  ] getRole[  ] getEndpoint[  ] toString[  ] RaftNodeReportImpl[ requireNonNull():10 ] getStatus[  ] getCommittedMembers[  ] getGroupId[  ] ,"microraft/src/main/java/io/microraft/impl/report/RaftNodeReportImpl.java: [Add Method Annotation(32), Change Return Type(4), Rename Method(3), Extract Class(3), Move And Rename Class(1), Split Package(1), Change Attribute Type(1), Extract Interface(1)]"
io.microraft.impl.LinearizableQueryTest,class,2 -> 35,e5986d0d194c1ec29e4332ea08b4a709a9936a3d -> fa028e3ecbeda596a4ab928d0c662b65e30a78f2,0,0,0,28,23.0,22.0,2.0,2.0,0.0,0.0,234.0,220.0,0.0,0.0,55.0,61.0,22.0,22.0,when_leaderDemotesToFollowerWhileThereIsOngoingQuery_then_queryFails[ assertThat():4 getLeaderEndpoint():3 getNode():3 waitUntilLeaderElected():2 query():2 get():2 getLocalEndpoint():2 isNotNull():1 replicate():1 apply():1 hasCauseInstanceOf():1 start():1 isNotEqualTo():1 eventually():1 createMajoritySplitIndexes():1 fail():1 split():1 merge():1 newGroup():1 isEqualTo():1 ] init[ build():1 setMaxUncommittedLogEntryCount():1 newBuilder():1 ] when_followersInstallSnapshot_then_queryIsExecutedOnLeaderWithInstallSnapshotResponse[ getLocalEndpoint():13 dropMessagesToMember():4 allowAllMessagesToMember():2 join():2 query():2 assertThat():2 isEqualTo():2 getIndex():1 waitUntilLeaderElected():1 getLeaderElectionTimeoutMillis():1 eventually():1 setCommitCountToTakeSnapshot():1 getNodesExcept():1 getSnapshotEntry():1 setLeaderHeartbeatTimeoutMillis():1 replicate():1 setLeaderElectionTimeoutMillis():1 apply():1 start():1 getLeaderHeartbeatPeriodMillis():1 newBuilder():1 getLeaderHeartbeatTimeoutMillis():1 getLeaderQueryRound():1 build():1 getResult():1 setLeaderHeartbeatPeriodMillis():1 ] when_linearizableQueryIsIssuedWithoutCommitIndex_then_itReadsLastState[ assertThat():8 isEqualTo():7 getCommitIndex():6 query():4 get():4 replicate():2 apply():2 getLeaderQueryRound():2 getResult():2 waitUntilLeaderElected():1 start():1 isGreaterThan():1 newGroup():1 ] destroy[ destroy():1 ] when_newCommitIsDoneWhileThereIsWaitingQuery_then_queryRunsAfterNewCommit[ getLocalEndpoint():8 dropMessagesToMember():3 get():3 replicate():2 apply():2 query():2 assertThat():2 isEqualTo():2 getCommitIndex():2 waitUntilLeaderElected():1 start():1 getNodesExcept():1 resetAllRulesFrom():1 getResult():1 newGroup():1 ] when_multipleQueryLimitIsReachedBeforeHeartbeatAcks_then_noNewQueryIsAccepted[ getLocalEndpoint():8 query():4 dropMessagesToMember():3 assertThat():2 get():2 waitUntilLeaderElected():1 hasCauseInstanceOf():1 start():1 setMaxUncommittedLogEntryCount():1 eventually():1 newBuilder():1 getNodesExcept():1 fail():1 build():1 resetAllRulesFrom():1 isEqualTo():1 getCommitIndex():1 ] when_linearizableQueryIsIssuedWithFurtherCommitIndex_then_itReadsLastState[ get():2 query():2 fail():1 replicate():1 apply():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 start():1 newGroup():1 assertThat():1 getCommitIndex():1 ] when_multipleQueriesAreIssuedBeforeHeartbeatAcksReceived_then_allQueriesExecutedAtOnce[ getLocalEndpoint():8 query():4 assertThat():4 isEqualTo():4 dropMessagesToMember():3 get():3 getCommitIndex():3 getResult():2 replicate():1 apply():1 waitUntilLeaderElected():1 start():1 getNodesExcept():1 resetAllRulesFrom():1 newGroup():1 ] newGroup[  ] when_newCommitIsDoneWhileThereAreMultipleQueries_then_allQueriesRunAfterCommit[ getLocalEndpoint():8 query():4 assertThat():4 get():4 isEqualTo():4 dropMessagesToMember():3 getCommitIndex():3 replicate():2 apply():2 getResult():2 waitUntilLeaderElected():1 start():1 getNodesExcept():1 resetAllRulesFrom():1 newGroup():1 ] when_linearizableQueryIsIssuedToFollower_then_queryFails[ query():2 fail():1 getAnyFollowerNode():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 get():1 start():1 newGroup():1 assertThat():1 ] when_linearizableQueryIsIssuedWithCommitIndex_then_itReadsLastState[ assertThat():8 isEqualTo():7 getCommitIndex():6 query():4 get():4 replicate():2 apply():2 getLeaderQueryRound():2 getResult():2 waitUntilLeaderElected():1 start():1 isGreaterThan():1 newGroup():1 ] when_followerFallsBehind_then_queryIsExecutedOnLeaderWithAppendEntriesFailureResponse[ getLocalEndpoint():14 dropMessagesToMember():4 join():3 allowMessagesToMember():2 query():2 replicate():1 changeMembership():1 apply():1 waitUntilLeaderElected():1 start():1 createNewRaftNode():1 getNodesExcept():1 ] ,"microraft/src/test/java/io/microraft/impl/LinearizableQueryTest.java: [Change Variable Type(26), Extract Variable(12), Rename Variable(4), Remove Variable Modifier(2), Move Package(1), Move Class(1), Rename Method(1), Extract Superclass(1)]"
io.microraft.impl.RaftNodeImpl$RaftNodeBuilderImpl,innerclass,54 -> 55,3973c1acd15c366fd6eb177576ee378e172f4997 -> ef2790fdc993517ccd2b006643f94f8a8fcf9b79,0,0,0,29,15.0,17.0,1.0,1.0,38.0,38.0,87.0,84.0,0.0,0.0,11.0,10.0,23.0,21.0,setGroupId[  ] setInitialGroupMembers[ requireNonNull():1 ] setRestoredState[ requireNonNull():1 ] build[  ] setLocalEndpoint[ requireNonNull():1 ] setRuntime[ requireNonNull():1 ] setStateMachine[ requireNonNull():1 ] setModelFactory[ requireNonNull():1 ] setStore[ requireNonNull():1 ] setConfig[ requireNonNull():1 ] ,"microraft/src/main/java/io/microraft/impl/RaftNodeImpl.java: [Add Parameter(18), Extract Method(13), Rename Attribute(6), Remove Parameter(6), Rename Method(4), Change Parameter Type(4), Rename Parameter(4), Change Attribute Type(4), Change Return Type(4), Remove Method Annotation(3), Change Method Access Modifier(2)]"
io.microraft.impl.LocalQueryTest,class,90 -> 224,63958d532fc63c8c6c39ed55925983b1b6ed4ff3 -> 543fc2022072381de448218da243f9254f635720,0,0,0,4,15.0,14.0,2.0,2.0,0.0,0.0,382.0,295.0,0.0,0.0,36.0,36.0,44.0,36.0,when_queryFromSplitLeaderWithLeaderLocal_then_readFailsAfterLeaderDemotesToFollower[ query():2 eventually():2 assertThat():2 get():2 getCommitIndex():2 replicate():1 getNodes():1 apply():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 splitMembers():1 start():1 fail():1 getLocalEndpoint():1 isEqualTo():1 ] when_queryFromFollower_withoutAnyCommit_thenReturnDefaultValue[ query():2 assertThat():2 getAnyFollowerNode():1 waitUntilLeaderElected():1 get():1 isNull():1 getResult():1 start():1 isEqualTo():1 getCommitIndex():1 ] when_queryFromSlowFollower_thenEventuallyReadLatestValue[ getLocalEndpoint():4 get():3 replicate():2 apply():2 query():2 assertThat():2 isEqualTo():2 getCommitIndex():2 waitUntilLeaderElected():1 start():1 eventually():1 dropMessagesToMember():1 getAnyFollowerNode():1 allowAllMessagesToMember():1 getResult():1 ] when_queryFromFollowerWithCommitIndex_onStableCluster_thenReadLatestValue[ assertThat():3 isEqualTo():3 getCommitIndex():3 query():2 get():2 replicate():1 apply():1 waitUntilLeaderElected():1 start():1 eventually():1 getNodesExcept():1 getResult():1 getLocalEndpoint():1 ] when_queryFromSlowFollower_thenReadStaleValue[ assertThat():3 get():3 isEqualTo():3 getCommitIndex():3 replicate():2 apply():2 query():2 getLocalEndpoint():2 waitUntilLeaderElected():1 start():1 eventually():1 dropMessagesToMember():1 getAnyFollowerNode():1 getResult():1 ] when_queryFromLeader_withoutAnyCommit_thenReturnDefaultValue[ query():2 assertThat():2 waitUntilLeaderElected():1 get():1 isNull():1 getResult():1 start():1 isEqualTo():1 getCommitIndex():1 ] destroy[ destroy():1 ] when_queryFromLeaderWithoutCommitIndex_onStableCluster_thenReadLatestValue[ get():2 query():2 assertThat():2 isEqualTo():2 getCommitIndex():2 replicate():1 apply():1 waitUntilLeaderElected():1 getResult():1 start():1 ] when_queryFromLeaderWithCommitIndex_onStableCluster_thenReadLatestValue[ get():2 query():2 assertThat():2 isEqualTo():2 getCommitIndex():2 replicate():1 apply():1 waitUntilLeaderElected():1 getResult():1 start():1 ] when_queryFromSplitLeaderWithAnyLocal_thenReadStaleValue[ assertThat():6 isEqualTo():5 getCommitIndex():5 query():4 get():4 getLeaderEndpoint():2 replicate():2 apply():2 eventually():2 getResult():2 getLocalEndpoint():2 isNotNull():1 getNodes():1 waitUntilLeaderElected():1 splitMembers():1 start():1 isNotEqualTo():1 getAnyFollowerNode():1 getNode():1 ] when_queryFromLeaderWithFurtherCommitIndex_onStableCluster_thenFail[ get():2 query():2 replicate():1 apply():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 start():1 assertThat():1 getCommitIndex():1 ] when_queryFromFollowerWithoutCommitIndex_onStableCluster_thenReadLatestValue[ assertThat():3 isEqualTo():3 getCommitIndex():3 query():2 get():2 replicate():1 apply():1 waitUntilLeaderElected():1 start():1 eventually():1 getNodesExcept():1 getResult():1 getLocalEndpoint():1 ] when_queryFromFollower_withLeaderLocalPolicy_thenFail[ get():2 query():2 replicate():1 getAnyFollowerNode():1 apply():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 start():1 assertThat():1 ] when_queryFromLeaderWithCommitIndex_withoutAnyCommit_thenFail[ query():2 fail():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 get():1 start():1 assertThat():1 getCommitIndex():1 ] when_queryFromFollowerWithCommitIndex_withoutAnyCommit_thenReturnDefaultValue[ query():2 fail():1 getAnyFollowerNode():1 waitUntilLeaderElected():1 hasCauseInstanceOf():1 get():1 start():1 assertThat():1 getCommitIndex():1 ] when_queryFromSplitLeader_thenEventuallyReadLatestValue[ assertThat():4 getCommitIndex():4 eventually():3 get():3 isEqualTo():3 getLeaderEndpoint():2 replicate():2 apply():2 query():2 getLocalEndpoint():2 isNotNull():1 getNodes():1 waitUntilLeaderElected():1 splitMembers():1 start():1 isNotEqualTo():1 getAnyFollowerNode():1 merge():1 getResult():1 getNode():1 ] ,"microraft/src/test/java/io/microraft/impl/LocalQueryTest.java: [Change Variable Type(16), Rename Method(3), Inline Variable(2), Rename Variable(2), Move Package(1), Move Class(1), Extract Superclass(1)]"

Class,Type,Commit Number,Commit Hash,Code Churn,Lines Added,Lines Deleted,Modified Files,From CBO,To CBO,From DIT,To DIT,From LCOM,To LCOM,From LOC,To LOC,From NOC,To NOC,From RFC,To RFC,From WMC,To WMC,Method Invocations,Refactoring Patterns
com.wepay.waltz.tools.client.ClientCli,class,233 -> 241,dbc38d2581dda571c707bcdcc43a40df8b31d35f -> 2a308cb54e9eeb00e234de67587a66e48dd8076a,0,0,0,2,9.0,8.0,10.0,4.0,15.0,15.0,411.0,313.0,0.0,0.0,7.0,7.0,7.0,7.0,ClientCli[ asList():1 ] testMain[ processCmd():1 ] main[ processCmd():1 ] ,waltz-tools/src/main/java/com/wepay/waltz/tools/client/ClientCli.java: [Extract Method(13)]
com.wepay.waltz.common.message.MessageCodecV2,class,303 -> 304,73aab90cdab9d7108df2eac94feebe602ed59222 -> 21c95b1cc676574d8794ce3fe671dcec10fb72ec,2,0,2,4,32.0,32.0,1.0,1.0,15.0,15.0,226.0,224.0,0.0,0.0,28.0,28.0,55.0,55.0,encode[ writeLong():10 writeInt():5 type():4 writeBoolean():4 writeIntArray():3 writeByteArray():2 writeString():2 getKey():1 writeByte():1 entrySet():1 getMessage():1 writeTo():1 getValue():1 size():1 ] magicByte[  ] decode[ readLong():10 readInt():5 readIntArray():3 readBoolean():3 readByteArray():2 readString():2 verifyChecksum():2 readFrom():1 readByte():1 put():1 ] version[  ] ,"waltz-common/src/main/java/com/wepay/waltz/common/message/MessageCodecV2.java: [Extract Method(28), Rename Variable(4), Parameterize Variable(4)]"
com.wepay.waltz.tools.storage.StorageCli,class,62 -> 68,5879335b5a4339972e301c5a3de89a17d363e981 -> d365a59f132f9de7cd8a9273858c4416833ee43e,0,0,0,3,11.0,11.0,10.0,10.0,15.0,15.0,690.0,642.0,0.0,0.0,5.0,5.0,6.0,6.0,openStorageAdminClient[ getStoreParams():1 open():1 ] testMain[ processCmd():1 ] main[ processCmd():1 ] StorageCli[ asList():1 ] openStorageClient[ getStoreParams():1 openStorageClient():1 open():1 ] ,"waltz-tools/src/main/java/com/wepay/waltz/tools/storage/StorageCli.java: [Extract Method(27), Add Parameter(6), Change Variable Type(4), Rename Variable(4)] waltz-tools/src/test/java/com/wepay/waltz/tools/storage/StorageCliTest.java: [Extract Method(8), Replace Attribute With Variable(4)]"
com.wepay.waltz.client.internal.network.WaltzNetworkClient$WaltzClientHandlerCallbacksImpl,innerclass,137 -> 140,ace392aabfac97c40308758571ba549a228ca61a -> 1e3089b61a94a785b6040ffb0598e61cf7b0a33a,0,0,0,6,9.0,9.0,1.0,1.0,120.0,91.0,157.0,137.0,0.0,0.0,31.0,25.0,46.0,34.0,onFeedSuspended[ getPartition():1 debug():1 sendMessage():1 isDebugEnabled():1 clientHighWaterMark():1 ] onChannelActive[ onMountingPartition():1 values():1 ] onExceptionCaught[  ] onWritabilityChanged[  ] onPartitionNotReady[ sleep():1 getPartition():1 debug():1 sendMessage():1 nextReqId():1 isDebugEnabled():1 clientHighWaterMark():1 info():1 ] onTransactionDataReceived[ transactionDataReceived():1 getPartition():1 debug():1 isDebugEnabled():1 ] onLockFailed[ partitionId():2 getPartition():1 debug():1 lockFailed():1 isDebugEnabled():1 ] onChannelInactive[ closeAsync():1 ] onTransactionIdReceived[ partitionId():2 getPartition():1 debug():1 applyTransaction():1 isDebugEnabled():1 ] onFlushCompleted[ partitionId():2 getPartition():1 debug():1 isDebugEnabled():1 flushCompleted():1 ] onPartitionMounted[ debug():1 get():1 sendMessage():1 isDebugEnabled():1 mounted():1 clientHighWaterMark():1 ] ,waltz-client/src/main/java/com/wepay/waltz/client/internal/network/WaltzNetworkClient.java: [Extract Method(7)]
com.wepay.waltz.test.util.IntegrationTestHelper,class,62 -> 68,5879335b5a4339972e301c5a3de89a17d363e981 -> d365a59f132f9de7cd8a9273858c4416833ee43e,0,0,0,3,20.0,20.0,1.0,1.0,997.0,675.0,327.0,299.0,0.0,0.0,75.0,65.0,72.0,64.0,getNumPartitions[  ] shutdownZooKeeperServer[ stop():1 ] createYamlConfigFile[ createYamlConfigFile():2 createTempDirectory():1 resolve():1 toString():1 dump():1 setConfigParams():1 write():1 ] getWaltzStorageRunner[ setProperty():5 valueOf():3 toString():2 resolve():1 get():1 exists():1 createDirectory():1 setConfigParams():1 getWaltzStorageRunner():1 put():1 ] getSslContext[ getSslContext():1 ] getServerJettyPort[  ] getWaltzServerRunner[ put():4 getWaltzServerRunner():1 get():1 ] getZkPort[  ] getSslConfigPath[  ] closeStorageAdminClient[ values():1 close():1 ] getZkSessionTimeout[  ] getHost[  ] getSegmentSizeThreshold[  ] startWaltzStorage[ awaitStart():1 getWaltzStorageRunner():1 startAsync():1 ] getZkConnectString[  ] IntegrationTestHelper[ getPort():6 getProperty():4 containsKey():4 parseInt():3 map():2 createTempDirectory():1 createYamlConfigFile():1 getCanonicalHostName():1 setProperty():1 setConfigParams():1 getLocalHost():1 ] getStoragePort[  ] getClusterKey[  ] closeAll[ shutdownZooKeeperServer():1 shutdownWaltzStorage():1 closeStorageAdminClient():1 cleanupSSL():1 cleanupWorkDir():1 shutdownWaltzServer():1 cleanupZnode():1 ] getZooKeeperServerRunner[ resolve():1 ] shutdownWaltzServer[ stop():1 values():1 ] startWaltzServer[ awaitStart():1 getWaltzServerRunner():1 startAsync():1 ] cleanupZnode[ close():1 deleteRecursively():1 ] startZooKeeperServer[ getStoreParams():1 createStores():1 start():1 getZooKeeperServerRunner():1 createCluster():1 close():1 ] setClusterKey[  ] getStorageAdminPort[  ] getZnodePath[  ] getWorkDir[  ] getServerPort[  ] getStorageJettyPort[  ] setWaltzStorageAssignment[ add():1 setPartitionAssignment():1 get():1 setWaltzStorageAssignment():1 getStorageAdminClient():1 ] shutdownWaltzStorage[ stop():1 values():1 ] cleanupSSL[ close():1 ] cleanupWorkDir[ removeDirectory():1 toFile():1 ] getStorageConnectString[  ] getStorageAdminClient[ getStoreParams():1 getSslContext():1 get():1 getStorageAdminClient():1 open():1 put():1 ] getSslSetup[  ] ,"waltz-test/src/main/java/com/wepay/waltz/test/util/IntegrationTestHelper.java: [Extract Method(24), Rename Method(4)]"
com.wepay.waltz.tools.client.ClientCliTest,class,85 -> 88,0546f3aab8953e6468372614d5b1a3aae00a8426 -> 5ab1197a1072c6a26c28e9b28f87ecf415d92ae6,0,0,0,2,11.0,8.0,1.0,1.0,8.0,9.0,148.0,104.0,0.0,0.0,36.0,24.0,10.0,8.0,createProperties[ setProperty():3 valueOf():1 setConfigParams():1 ] testSubmit[ valueOf():3 testMain():3 setProperty():3 assertFalse():2 contains():2 toString():2 createYamlConfigFile():1 closeAll():1 startWaltzServer():1 startZooKeeperServer():1 getZnodePath():1 getStorageAdminPort():1 createProperties():1 getZkSessionTimeout():1 getSslSetup():1 getHost():1 getZkConnectString():1 startWaltzStorage():1 ] restoreStreams[ setErr():1 setOut():1 ] setUpStreams[ setErr():1 setOut():1 ] ,"waltz-tools/src/test/java/com/wepay/waltz/tools/client/ClientCliTest.java: [Extract Method(10), Extract Variable(3)]"
com.wepay.waltz.client.AbstractClientCallbacksForJDBC,class,96 -> 98,de30a932d378e5c4f250a4f020796637f2b63453 -> 2f5df409b4032097c148a9c455268ef3aaaba776,0,0,0,2,8.0,7.0,4.0,1.0,37.0,48.0,356.0,197.0,2.0,2.0,33.0,37.0,26.0,27.0,AbstractClientCallbacksForJDBC[ format():3 ] applyTransaction[ closeSafely():2 get():2 rollback():1 setTransactionIsolation():1 debug():1 applyTransaction():1 partitionId():1 selectHighWaterMark():1 backoff():1 commit():1 prepareStatement():1 getUpdateCount():1 execute():1 wrapConnection():1 setInt():1 getConnection():1 setLong():1 setAutoCommit():1 trySet():1 ] onErrorGettingClientHighWaterMark[  ] selectHighWaterMark[ closeSafely():2 next():1 getLong():1 insert():1 prepareStatement():1 updateHighWaterMarkCache():1 setInt():1 executeQuery():1 ] insert[ prepareStatement():1 closeSafely():1 execute():1 setInt():1 ] getClientHighWaterMark[ getConnection():1 onErrorGettingClientHighWaterMark():1 selectHighWaterMark():1 backoff():1 setAutoCommit():1 closeSafely():1 ] closeSafely[ close():3 ] updateHighWaterMarkCache[ get():1 trySet():1 putIfAbsent():1 ] wrapConnection[ getClass():1 newProxyInstance():1 getClassLoader():1 ] ,waltz-client/src/test/java/com/wepay/waltz/client/AbstractClientCallbacksForJDBCTest.java: [Extract Method(18)]
com.wepay.waltz.client.AbstractClientCallbacksForJDBCTest,class,96 -> 98,de30a932d378e5c4f250a4f020796637f2b63453 -> 2f5df409b4032097c148a9c455268ef3aaaba776,0,0,0,2,16.0,14.0,1.0,1.0,80.0,0.0,352.0,294.0,0.0,0.0,41.0,34.0,32.0,21.0,testRetryThenSuccess[ get():2 assertEquals():2 getConnection():1 submit():1 await():1 create():1 mkTransactionContext():1 createSchema():1 dropSchema():1 setObject():1 ] testRetryThenFailure[ get():2 assertEquals():2 getConnection():1 submit():1 await():1 create():1 mkTransactionContext():1 createSchema():1 dropSchema():1 setObject():1 ] mkTransactionContext[  ] testOnErrorGettingClientHighWaterMark[ submit():1 mkTransactionContext():1 getMessage():1 assertEquals():1 createSchema():1 setObject():1 getCause():1 getConnection():1 fail():1 assertTrue():1 create():1 makeDbDown():1 dropSchema():1 ] createSchema[ rollback():1 commit():1 prepareStatement():1 execute():1 close():1 ] testDatabaseDown[ numConnectionsMade():3 assertEquals():3 get():2 incrementAndGet():1 applyTransaction():1 makeDbUp():1 start():1 createSchema():1 sleep():1 getConnection():1 isAlive():1 assertTrue():1 await():1 getClientHighWaterMark():1 makeDbDown():1 countDown():1 dropSchema():1 ] dropSchema[ close():2 rollback():1 commit():1 prepareStatement():1 execute():1 ] testConcurrentClients[ assertEquals():3 size():3 add():2 submit():2 format():2 mkTransactionContext():2 sort():2 setObject():2 addAll():2 createSchema():1 getConnection():1 await():1 create():1 dropSchema():1 ] ,waltz-client/src/test/java/com/wepay/waltz/client/AbstractClientCallbacksForJDBCTest.java: [Extract Method(18)]
com.wepay.waltz.tools.client.ClientCli$Validate$ConsumerTxnCallbacks,innerclass,43 -> 46,ec7c0e75e0643decbe0c592b4e33fcddb20d966f -> b12f4dc996ea4e21aa506141a730c9d480229638,0,0,0,10,4.0,4.0,1.0,1.0,4.0,4.0,29.0,33.0,0.0,0.0,10.0,9.0,7.0,8.0,applyTransaction[ getTransactionData():1 partitionId():1 format():1 countDown():1 longValue():1 ] ConsumerTxnCallbacks[  ] uncaughtException[ add():1 format():1 getMessage():1 ] getClientHighWaterMark[ getOrDefault():1 get():1 ] ,"waltz-tools/src/main/java/com/wepay/waltz/tools/client/ClientCli.java: [Rename Parameter(12), Replace Attribute With Variable(8), Rename Variable(4), Extract Attribute(3), Remove Parameter(3), Rename Attribute(2)] waltz-tools/src/test/java/com/wepay/waltz/tools/client/ClientCliTest.java: [Extract Method(10), Extract Variable(3)]"
com.wepay.waltz.client.internal.network.WaltzNetworkClient,class,87 -> 88,0d7623fb7ff7145354e6462e7a7765c926f4dbfb -> 5ab1197a1072c6a26c28e9b28f87ecf415d92ae6,0,0,0,2,17.0,16.0,2.0,2.0,0.0,0.0,252.0,214.0,0.0,0.0,19.0,14.0,26.0,19.0,getMessageHandler[  ] unmountPartition[ unmounted():1 remove():1 ] getPartition[ get():1 ] requestTransactionData[ partitionId():1 sendMessage():1 info():1 ] WaltzNetworkClient[  ] unmountAllPartitions[ unmountPartition():1 values():1 ] mountPartition[ onMountingPartition():1 mounting():1 put():1 ] shutdown[ unmounted():1 values():1 onNetworkClientDisconnected():1 ] ,waltz-client/src/main/java/com/wepay/waltz/client/internal/network/WaltzNetworkClient.java: [Extract Method(7)]
com.wepay.waltz.tools.client.ClientCli,class,68 -> 71,d365a59f132f9de7cd8a9273858c4416833ee43e -> 75b147b756d7aa631bbbdeea4181b565af635143,0,0,0,1,9.0,4.0,4.0,3.0,15.0,3.0,314.0,270.0,0.0,0.0,6.0,2.0,6.0,3.0,ClientCli[ asList():1 ] testMain[ processCmd():1 ] main[ processCmd():1 ] ,waltz-tools/src/main/java/com/wepay/waltz/tools/client/ClientCli.java: [Extract Method(13)]
com.wepay.waltz.tools.storage.StorageCli$ListPartition,innerclass,62 -> 68,5879335b5a4339972e301c5a3de89a17d363e981 -> d365a59f132f9de7cd8a9273858c4416833ee43e,0,0,0,3,19.0,16.0,2.0,2.0,36.0,21.0,136.0,88.0,0.0,0.0,47.0,37.0,22.0,14.0,processCmd[ getOptionValue():2 parseInt():1 split():1 getPartitionInfo():1 format():1 getMessage():1 getMetricsJson():1 listPartitionInfo():1 ] configureOptions[ setRequired():2 addOption():2 build():2 hasArg():2 builder():2 longOpt():2 desc():2 ] getPartitionInfo[ path():12 asInt():5 next():1 elements():1 hasNext():1 readTree():1 put():1 ] getMetricsJson[ get():4 close():2 parseCliConfigFile():1 getSslContext():1 openStorageAdminClient():1 getMetrics():1 ] listPartitionInfo[ format():6 append():6 getKey():1 getValue():1 println():1 entrySet():1 toString():1 ] ListPartition[  ] getUsage[ buildUsage():1 getOptions():1 ] ,"waltz-tools/src/main/java/com/wepay/waltz/tools/storage/StorageCli.java: [Extract Method(27), Add Parameter(6), Change Variable Type(4), Rename Variable(4)] waltz-tools/src/test/java/com/wepay/waltz/tools/storage/StorageCliTest.java: [Extract Method(8), Replace Attribute With Variable(4)]"
com.wepay.waltz.tools.client.ClientCliTest,class,43 -> 46,ec7c0e75e0643decbe0c592b4e33fcddb20d966f -> b12f4dc996ea4e21aa506141a730c9d480229638,0,0,0,10,8.0,8.0,1.0,1.0,9.0,4.0,78.0,50.0,0.0,0.0,23.0,22.0,7.0,4.0,createProperties[ setProperty():3 valueOf():1 setConfigParams():1 ] testSubmit[ valueOf():3 testMain():3 setProperty():3 assertFalse():2 contains():2 toString():2 createYamlConfigFile():1 closeAll():1 startWaltzServer():1 startZooKeeperServer():1 getZnodePath():1 getStorageAdminPort():1 createProperties():1 getZkSessionTimeout():1 getSslSetup():1 getHost():1 getZkConnectString():1 startWaltzStorage():1 ] restoreStreams[ setErr():1 setOut():1 ] setUpStreams[ setErr():1 setOut():1 ] ,"waltz-tools/src/test/java/com/wepay/waltz/tools/client/ClientCliTest.java: [Extract Method(10), Extract Variable(3)]"
com.wepay.waltz.tools.storage.StorageCliTest,class,163 -> 164,70341803f4b16ac27766e5afe9e70e9ba99d60aa -> 0d2b1aa89df467f8d8a7b4ecef2c82584c4aa56e,7,4,3,8,27.0,27.0,1.0,1.0,50.0,50.0,451.0,440.0,0.0,0.0,101.0,95.0,45.0,43.0,getIntegrationTestHelper[ setProperty():3 valueOf():1 ] testAvailability[ valueOf():4 testMain():2 findFirst():2 filter():2 getPartitionInfos():2 stream():2 assertTrue():2 get():2 getIntegrationTestHelper():1 getNumPartitions():1 createYamlConfigFile():1 nextInt():1 closeAll():1 getWaltzStorageRunner():1 startAsync():1 startZooKeeperServer():1 awaitStart():1 getZnodePath():1 createProperties():1 getSslSetup():1 getHost():1 getZkConnectString():1 ] testSyncPartitionAssignments[ setProperty():5 get():4 valueOf():4 createYamlConfigFile():2 close():2 getKey():2 createTempDirectory():2 entrySet():2 lastSessionInfo():2 getValue():2 getPort():2 stop():2 getReplicaAssignments():2 createStores():1 testMain():1 autoAssignPartition():1 getCause():1 put():1 getSslContext():1 addStorageNode():1 createProperties():1 assertTrue():1 setConfigParams():1 deleteRecursively():1 getStoreParams():1 add():1 getCanonicalHostName():1 start():1 getMessage():1 startAsync():1 getLocalHost():1 awaitStart():1 fail():1 contains():1 removeDirectory():1 toFile():1 toString():1 createCluster():1 open():1 ] setUpStreams[ setErr():1 setOut():1 ] testRecoverPartition[ valueOf():7 get():6 createYamlConfigFile():3 testMain():3 close():3 getPort():3 open():3 getWaltzStorageRunner():2 longValue():2 createProperties():2 assertNotNull():2 getZkConnectString():2 assertEquals():2 startAsync():2 getMaxTransactionId():2 awaitStart():2 getZnodePath():2 stop():2 setLowWaterMark():2 getSslSetup():2 getIntegrationTestHelper():1 getNumPartitions():1 appendRecords():1 makeRecords():1 getSslContext():1 setPartitionAssignment():1 getHost():1 getClusterKey():1 nextInt():1 list():1 startZooKeeperServer():1 size():1 getStorageAdminClient():1 ] createProperties[ setProperty():2 createProperties():1 setConfigParams():1 ] addStorageNode[ valueOf():2 testMain():1 ] testValidateConnectivity[ contains():3 toString():3 testMain():2 assertTrue():2 getHost():2 getIntegrationTestHelper():1 createYamlConfigFile():1 assertFalse():1 format():1 closeAll():1 getWaltzStorageRunner():1 startAsync():1 startWaltzServer():1 startZooKeeperServer():1 sleep():1 awaitStart():1 getZnodePath():1 getStorageAdminPort():1 createProperties():1 addStorageNode():1 getSslSetup():1 getZkConnectString():1 ] testRemovePartitionWithDeleteFilesOption[ assertFalse():4 resolve():3 findFirst():3 stream():3 get():3 filter():3 getPartitionInfos():3 testMain():2 valueOf():2 format():2 toFile():2 exists():2 getIntegrationTestHelper():1 getNumPartitions():1 createYamlConfigFile():1 directory():1 getWaltzStorageRunner():1 sleep():1 createProperties():1 assertTrue():1 getHost():1 getZkConnectString():1 nextInt():1 closeAll():1 startAsync():1 startWaltzServer():1 startZooKeeperServer():1 awaitStart():1 getZnodePath():1 toString():1 getSslSetup():1 ] testMaxTransactionId[ valueOf():10 testMain():5 assertTrue():4 get():4 contains():4 toString():4 setLowWaterMark():2 open():2 getIntegrationTestHelper():1 getNumPartitions():1 createYamlConfigFile():1 appendRecords():1 getWaltzStorageRunner():1 makeRecords():1 getSslContext():1 setPartitionAssignment():1 createProperties():1 close():1 getHost():1 getZkConnectString():1 getClusterKey():1 nextInt():1 closeAll():1 startAsync():1 startZooKeeperServer():1 awaitStart():1 getZnodePath():1 size():1 getStorageAdminClient():1 getSslSetup():1 ] testAddAndRemovePartition[ findFirst():5 stream():5 get():5 filter():5 getPartitionInfos():5 testMain():4 valueOf():4 assertFalse():3 assertTrue():2 getIntegrationTestHelper():1 getNumPartitions():1 createYamlConfigFile():1 getWaltzStorageRunner():1 sleep():1 createProperties():1 getHost():1 getZkConnectString():1 nextInt():1 closeAll():1 startAsync():1 startWaltzServer():1 startZooKeeperServer():1 awaitStart():1 getZnodePath():1 getSslSetup():1 ] restoreStreams[ setErr():1 setOut():1 ] testListPartition[ testMain():3 assertTrue():2 contains():2 toString():2 getIntegrationTestHelper():1 getNumPartitions():1 createYamlConfigFile():1 assertFalse():1 findFirst():1 getWaltzStorageRunner():1 sleep():1 createProperties():1 stream():1 get():1 getHost():1 getZkConnectString():1 valueOf():1 nextInt():1 closeAll():1 startAsync():1 startWaltzServer():1 startZooKeeperServer():1 filter():1 awaitStart():1 getPartitionInfos():1 getZnodePath():1 getSslSetup():1 ] ,"waltz-tools/src/test/java/com/wepay/waltz/tools/storage/StorageCliTest.java: [Extract Method(8), Replace Attribute With Variable(4)]"
com.wepay.waltz.tools.client.ClientCli,class,56 -> 58,ded8b29109c16332f700ef4961d50e382e39b40c -> 73cd4f379e4b75d9b019df122771c20949f18442,0,0,0,8,9.0,4.0,4.0,3.0,10.0,3.0,310.0,270.0,0.0,0.0,4.0,2.0,5.0,3.0,ClientCli[ asList():1 ] testMain[ processCmd():1 ] main[ processCmd():1 ] ,"waltz-tools/src/main/java/com/wepay/waltz/tools/client/ClientCli.java: [Change Variable Type(8), Rename Variable(4), Move Class(2), Add Class Modifier(2), Add Method Modifier(2), Move Method(2)]"
com.wepay.waltz.tools.client.ClientCli$Validate,innerclass,241 -> 243,2a308cb54e9eeb00e234de67587a66e48dd8076a -> 972669030f80cf056e38b0bc9740ef0958438e0d,0,0,0,1,17.0,8.0,3.0,3.0,14.0,6.0,248.0,65.0,0.0,0.0,34.0,20.0,19.0,12.0,processCmd[ getOptionValue():6 parseInt():5 produceTransactions():1 hasOption():1 format():1 getMessage():1 consumeAndValidate():1 getWaltzClientConfig():1 checkUncaughtExceptions():1 ] produceTransactions[ clientId():2 newFixedThreadPool():1 await():1 countDown():1 putIfAbsent():1 execute():1 shutdown():1 ] nextExponentialDistributedInterval[ random():1 log():1 ] Validate[ synchronizedList():1 ] configureOptions[ setRequired():6 addOption():6 build():6 hasArg():6 builder():6 longOpt():6 desc():6 ] consumeAndValidate[ clientId():2 newFixedThreadPool():1 await():1 putIfAbsent():1 execute():1 shutdown():1 ] getWaltzClientConfig[ load():1 ] checkUncaughtExceptions[ isEmpty():1 toString():1 append():1 ] getUsage[ buildUsage():1 getOptions():1 ] ,"waltz-tools/src/main/java/com/wepay/waltz/tools/client/ClientCli.java: [Rename Parameter(12), Replace Attribute With Variable(8), Rename Variable(4), Extract Attribute(3), Remove Parameter(3), Rename Attribute(2)] waltz-tools/src/test/java/com/wepay/waltz/tools/client/ClientCliTest.java: [Extract Method(10), Extract Variable(3)]"
com.wepay.waltz.tools.client.ClientCli$HighWaterMark,innerclass,54 -> 56,5e83efff24abc7f38fd1e5d2e52a724b141878ba -> ded8b29109c16332f700ef4961d50e382e39b40c,0,0,0,4,11.0,7.0,2.0,2.0,10.0,6.0,44.0,30.0,0.0,0.0,17.0,16.0,6.0,5.0,getHighWaterMark[ getHighWaterMark():1 ] processCmd[ getOptionValue():2 format():2 getHighWaterMark():1 parseInt():1 println():1 getMessage():1 getWaltzClientConfig():1 ] configureOptions[ setRequired():2 addOption():2 build():2 hasArg():2 builder():2 longOpt():2 desc():2 ] HighWaterMark[  ] getUsage[ buildUsage():1 getOptions():1 ] ,"waltz-tools/src/main/java/com/wepay/waltz/tools/client/ClientCli.java: [Add Method Modifier(2), Move Method(2)]"
com.wepay.waltz.tools.cluster.ClusterCli$Verify,innerclass,408 -> 412,52694f669faec2a1d28b71254407086870dbd605 -> 237d44e0bf3d8e2966cd284454d6822fc6dbec44,0,0,0,1,42.0,42.0,2.0,2.0,223.0,182.0,481.0,444.0,0.0,0.0,132.0,128.0,87.0,82.0,buildZookeeperPartitionAssignmentsValidation[ add():4 numPartitions():3 get():2 put():2 partitionAssignment():1 partitionsFor():1 isEmpty():1 serverIds():1 ] processCmd[ get():4 verifyValidation():2 add():1 buildZookeeperPartitionAssignmentsValidation():1 format():1 getMessage():1 createContext():1 parseCliConfigFile():1 getSSLConfig():1 println():1 getOptionValue():1 numPartitions():1 getWaltzClientConfig():1 close():1 buildServersZKPartitionAssignmentsConsistencyValidation():1 ] configureOptions[ setRequired():2 addOption():2 build():2 hasArg():2 builder():2 longOpt():2 desc():2 ] verifyValidation[ println():2 get():2 size():1 equals():1 name():1 toArray():1 verifyValidation():1 toString():1 ] buildServerZKPartitionAssignmentsValidation[ put():2 get():2 thenAccept():1 add():1 partitionAssignment():1 forEach():1 exceptionally():1 getMessage():1 verifyAssignments():1 asList():1 partitionsFor():1 equals():1 name():1 getServerPartitionAssignments():1 ] Verify[  ] verifyAssignments[ put():3 containsKey():1 ] buildServersZKPartitionAssignmentsConsistencyValidation[ add():1 allOf():1 size():1 serverDescriptors():1 toArray():1 buildServerZKPartitionAssignmentsValidation():1 ] getUsage[ buildUsage():1 getOptions():1 ] ,"waltz-tools/src/main/java/com/wepay/waltz/tools/cluster/ClusterCli.java: [Extract Method(23), Parameterize Variable(4), Add Parameter(3), Remove Parameter(3)]"
com.wepay.waltz.tools.cluster.ClusterCli,class,408 -> 412,52694f669faec2a1d28b71254407086870dbd605 -> 237d44e0bf3d8e2966cd284454d6822fc6dbec44,0,0,0,1,5.0,5.0,4.0,4.0,3.0,3.0,552.0,515.0,0.0,0.0,2.0,2.0,3.0,3.0,ClusterCli[ asList():1 ] testMain[ processCmd():1 ] main[ processCmd():1 ] getWaltzClientConfig[ load():1 put():1 ] ,"waltz-tools/src/main/java/com/wepay/waltz/tools/cluster/ClusterCli.java: [Extract Method(23), Parameterize Variable(4), Add Parameter(3), Remove Parameter(3)]"
com.wepay.waltz.client.internal.network.WaltzNetworkClient,class,144 -> 149,fd931c54a991e429d5383ebccc892424b55d3261 -> 54cb0391139d1693bc2d5bc16c4a2b9982444625,0,0,0,2,20.0,21.0,2.0,2.0,0.0,1.0,387.0,298.0,0.0,0.0,30.0,28.0,55.0,30.0,getMessageHandler[  ] unmountPartition[ unmounted():1 remove():1 ] getPartition[ get():1 ] requestTransactionData[ partitionId():1 sendMessage():1 info():1 ] WaltzNetworkClient[  ] unmountAllPartitions[ unmountPartition():1 values():1 ] mountPartition[ onMountingPartition():1 mounting():1 put():1 ] shutdown[ unmounted():1 values():1 onNetworkClientDisconnected():1 ] ,waltz-client/src/main/java/com/wepay/waltz/client/internal/network/WaltzNetworkClient.java: [Extract Method(7)]
com.wepay.waltz.tools.client.ClientCli$DummyTxnCallbacks,innerclass,56 -> 186,ded8b29109c16332f700ef4961d50e382e39b40c -> dea8b81530a11497b4a0fd1682f7535378a14963,1,1,0,1,2.0,3.0,1.0,1.0,3.0,1.0,9.0,17.0,0.0,0.0,0.0,1.0,3.0,2.0,applyTransaction[  ] uncaughtException[  ] getClientHighWaterMark[  ] ,"waltz-tools/src/main/java/com/wepay/waltz/tools/client/ClientCli.java: [Change Variable Type(8), Rename Variable(4), Move Class(2), Add Class Modifier(2), Add Method Modifier(2), Move Method(2)]"
com.wepay.waltz.tools.storage.StorageCliTest,class,62 -> 68,5879335b5a4339972e301c5a3de89a17d363e981 -> d365a59f132f9de7cd8a9273858c4416833ee43e,0,0,0,3,27.0,27.0,1.0,1.0,50.0,29.0,439.0,402.0,0.0,0.0,95.0,91.0,43.0,37.0,getIntegrationTestHelper[ setProperty():3 valueOf():1 ] testAvailability[ valueOf():4 testMain():2 findFirst():2 filter():2 getPartitionInfos():2 stream():2 assertTrue():2 get():2 getIntegrationTestHelper():1 getNumPartitions():1 createYamlConfigFile():1 nextInt():1 closeAll():1 getWaltzStorageRunner():1 startAsync():1 startZooKeeperServer():1 awaitStart():1 getZnodePath():1 createProperties():1 getSslSetup():1 getHost():1 getZkConnectString():1 ] testSyncPartitionAssignments[ setProperty():5 get():4 valueOf():4 createYamlConfigFile():2 close():2 getKey():2 createTempDirectory():2 entrySet():2 lastSessionInfo():2 getValue():2 getPort():2 stop():2 getReplicaAssignments():2 createStores():1 testMain():1 autoAssignPartition():1 getCause():1 put():1 getSslContext():1 addStorageNode():1 createProperties():1 assertTrue():1 setConfigParams():1 deleteRecursively():1 getStoreParams():1 add():1 getCanonicalHostName():1 start():1 getMessage():1 startAsync():1 getLocalHost():1 awaitStart():1 fail():1 contains():1 removeDirectory():1 toFile():1 toString():1 createCluster():1 open():1 ] setUpStreams[ setErr():1 setOut():1 ] testRecoverPartition[ valueOf():7 get():6 createYamlConfigFile():3 testMain():3 close():3 getPort():3 open():3 getWaltzStorageRunner():2 longValue():2 createProperties():2 assertNotNull():2 getZkConnectString():2 assertEquals():2 startAsync():2 getMaxTransactionId():2 awaitStart():2 getZnodePath():2 stop():2 setLowWaterMark():2 getSslSetup():2 getIntegrationTestHelper():1 getNumPartitions():1 appendRecords():1 makeRecords():1 getSslContext():1 setPartitionAssignment():1 getHost():1 getClusterKey():1 nextInt():1 list():1 startZooKeeperServer():1 size():1 getStorageAdminClient():1 ] createProperties[ setProperty():2 createProperties():1 setConfigParams():1 ] addStorageNode[ valueOf():2 testMain():1 ] testValidateConnectivity[ contains():3 toString():3 testMain():2 assertTrue():2 getHost():2 getIntegrationTestHelper():1 createYamlConfigFile():1 assertFalse():1 format():1 closeAll():1 getWaltzStorageRunner():1 startAsync():1 startWaltzServer():1 startZooKeeperServer():1 sleep():1 awaitStart():1 getZnodePath():1 getStorageAdminPort():1 createProperties():1 addStorageNode():1 getSslSetup():1 getZkConnectString():1 ] testRemovePartitionWithDeleteFilesOption[ assertFalse():4 resolve():3 findFirst():3 stream():3 get():3 filter():3 getPartitionInfos():3 testMain():2 valueOf():2 format():2 toFile():2 exists():2 getIntegrationTestHelper():1 getNumPartitions():1 createYamlConfigFile():1 directory():1 getWaltzStorageRunner():1 sleep():1 createProperties():1 assertTrue():1 getHost():1 getZkConnectString():1 nextInt():1 closeAll():1 startAsync():1 startWaltzServer():1 startZooKeeperServer():1 awaitStart():1 getZnodePath():1 toString():1 getSslSetup():1 ] testMaxTransactionId[ valueOf():10 testMain():5 assertTrue():4 get():4 contains():4 toString():4 setLowWaterMark():2 open():2 getIntegrationTestHelper():1 getNumPartitions():1 createYamlConfigFile():1 appendRecords():1 getWaltzStorageRunner():1 makeRecords():1 getSslContext():1 setPartitionAssignment():1 createProperties():1 close():1 getHost():1 getZkConnectString():1 getClusterKey():1 nextInt():1 closeAll():1 startAsync():1 startZooKeeperServer():1 awaitStart():1 getZnodePath():1 size():1 getStorageAdminClient():1 getSslSetup():1 ] testAddAndRemovePartition[ findFirst():5 stream():5 get():5 filter():5 getPartitionInfos():5 testMain():4 valueOf():4 assertFalse():3 assertTrue():2 getIntegrationTestHelper():1 getNumPartitions():1 createYamlConfigFile():1 getWaltzStorageRunner():1 sleep():1 createProperties():1 getHost():1 getZkConnectString():1 nextInt():1 closeAll():1 startAsync():1 startWaltzServer():1 startZooKeeperServer():1 awaitStart():1 getZnodePath():1 getSslSetup():1 ] restoreStreams[ setErr():1 setOut():1 ] testListPartition[ testMain():3 assertTrue():2 contains():2 toString():2 getIntegrationTestHelper():1 getNumPartitions():1 createYamlConfigFile():1 assertFalse():1 findFirst():1 getWaltzStorageRunner():1 sleep():1 createProperties():1 stream():1 get():1 getHost():1 getZkConnectString():1 valueOf():1 nextInt():1 closeAll():1 startAsync():1 startWaltzServer():1 startZooKeeperServer():1 filter():1 awaitStart():1 getPartitionInfos():1 getZnodePath():1 getSslSetup():1 ] ,"waltz-tools/src/test/java/com/wepay/waltz/tools/storage/StorageCliTest.java: [Extract Method(8), Replace Attribute With Variable(4)]"
com.wepay.waltz.tools.client.ClientCli$ClientCliBaseClass$ProducerTxnCallbacks,innerclass,222 -> 229,f350856e47114d5410b7f9a0093f08b966126136 -> ebff88268c656509b0dc93e218cc8e54ad023135,0,0,0,4,4.0,4.0,1.0,1.0,4.0,4.0,26.0,25.0,0.0,0.0,8.0,7.0,6.0,6.0,ProducerTxnCallbacks[  ] applyTransaction[ get():2 getOrDefault():1 partitionId():1 format():1 countDown():1 put():1 ] uncaughtException[ add():1 format():1 getMessage():1 ] getClientHighWaterMark[ getOrDefault():1 get():1 ] ,"waltz-tools/src/main/java/com/wepay/waltz/tools/client/ClientCli.java: [Pull Up Attribute(20), Move Class(12), Change Attribute Access Modifier(10), Change Method Access Modifier(8), Pull Up Method(8), Extract Superclass(3)]"
com.wepay.waltz.client.AbstractClientCallbacksForJDBC,class,100 -> 102,0e9c14c256fa1ce4b31f29674157a75075135626 -> ffafd644598b4c58f12e401b980305e5417e670d,0,0,0,2,8.0,7.0,4.0,1.0,37.0,48.0,356.0,196.0,2.0,2.0,33.0,37.0,26.0,27.0,AbstractClientCallbacksForJDBC[ format():3 ] applyTransaction[ closeSafely():2 get():2 rollback():1 setTransactionIsolation():1 debug():1 applyTransaction():1 partitionId():1 selectHighWaterMark():1 backoff():1 commit():1 prepareStatement():1 getUpdateCount():1 execute():1 wrapConnection():1 setInt():1 getConnection():1 setLong():1 setAutoCommit():1 trySet():1 ] onErrorGettingClientHighWaterMark[  ] selectHighWaterMark[ closeSafely():2 next():1 getLong():1 insert():1 prepareStatement():1 updateHighWaterMarkCache():1 setInt():1 executeQuery():1 ] insert[ prepareStatement():1 closeSafely():1 execute():1 setInt():1 ] getClientHighWaterMark[ getConnection():1 onErrorGettingClientHighWaterMark():1 selectHighWaterMark():1 backoff():1 setAutoCommit():1 closeSafely():1 ] closeSafely[ close():3 ] updateHighWaterMarkCache[ get():1 trySet():1 putIfAbsent():1 ] wrapConnection[ getClass():1 newProxyInstance():1 getClassLoader():1 ] ,waltz-client/src/test/java/com/wepay/waltz/client/AbstractClientCallbacksForJDBCTest.java: [Extract Method(18)]
com.wepay.waltz.client.AbstractClientCallbacksForJDBCTest,class,101 -> 102,e81f3d5e4204a08a02157d26d468b0c3c11eb87e -> ffafd644598b4c58f12e401b980305e5417e670d,0,0,0,2,16.0,14.0,1.0,1.0,80.0,0.0,355.0,291.0,0.0,0.0,41.0,34.0,32.0,21.0,testRetryThenSuccess[ get():2 assertEquals():2 getConnection():1 submit():1 await():1 create():1 mkTransactionContext():1 createSchema():1 dropSchema():1 setObject():1 ] testRetryThenFailure[ get():2 assertEquals():2 getConnection():1 submit():1 await():1 create():1 mkTransactionContext():1 createSchema():1 dropSchema():1 setObject():1 ] mkTransactionContext[  ] testOnErrorGettingClientHighWaterMark[ submit():1 mkTransactionContext():1 getMessage():1 assertEquals():1 createSchema():1 setObject():1 getCause():1 getConnection():1 fail():1 assertTrue():1 create():1 makeDbDown():1 dropSchema():1 ] createSchema[ rollback():1 commit():1 prepareStatement():1 execute():1 close():1 ] testDatabaseDown[ numConnectionsMade():3 assertEquals():3 get():2 incrementAndGet():1 applyTransaction():1 makeDbUp():1 start():1 createSchema():1 sleep():1 getConnection():1 isAlive():1 assertTrue():1 await():1 getClientHighWaterMark():1 makeDbDown():1 countDown():1 dropSchema():1 ] dropSchema[ close():2 rollback():1 commit():1 prepareStatement():1 execute():1 ] testConcurrentClients[ assertEquals():3 size():3 add():2 submit():2 format():2 mkTransactionContext():2 sort():2 setObject():2 addAll():2 createSchema():1 getConnection():1 await():1 create():1 dropSchema():1 ] ,waltz-client/src/test/java/com/wepay/waltz/client/AbstractClientCallbacksForJDBCTest.java: [Extract Method(18)]
com.wepay.waltz.client.internal.InternalClientTestBase,class,107 -> 110,bd4141e2dd5aa0bc8e5c8ac74f31b51000e95d7f -> 5708469a38c3181fdcb82f30f69fe17b488acb83,0,0,0,4,19.0,18.0,1.0,1.0,9.0,0.0,76.0,70.0,2.0,2.0,27.0,25.0,8.0,6.0,getInternalStreamClient[ add():1 setEndpoints():1 incrementAndGet():1 setNumPartitions():1 size():1 getCallbacks():1 setClientId():1 ] getInternalRpcClient[ add():1 setEndpoints():1 setNumPartitions():1 incrementAndGet():1 size():1 getCallbacks():1 setClientId():1 ] setup[ next():1 awaitStart():1 endPoint():1 iterator():1 getPort():1 setPartitions():1 createInsecureContext():1 asList():1 startAsync():1 managedServers():1 put():1 ] getCallbacks[ setClientHighWaterMark():3 ] teardown[ close():3 stop():1 ] ,waltz-client/src/test/java/com/wepay/waltz/client/internal/InternalClientTestBase.java: [Extract Method(22)]
com.wepay.waltz.tools.client.ClientCli$Validate,innerclass,241 -> 243,2a308cb54e9eeb00e234de67587a66e48dd8076a -> 972669030f80cf056e38b0bc9740ef0958438e0d,0,0,0,1,17.0,8.0,3.0,3.0,14.0,6.0,248.0,65.0,0.0,0.0,34.0,20.0,19.0,12.0,processCmd[ getOptionValue():6 parseInt():5 produceTransactions():1 hasOption():1 format():1 getMessage():1 consumeAndValidate():1 getWaltzClientConfig():1 checkUncaughtExceptions():1 ] produceTransactions[ clientId():2 newFixedThreadPool():1 await():1 countDown():1 putIfAbsent():1 execute():1 shutdown():1 ] nextExponentialDistributedInterval[ random():1 log():1 ] Validate[ synchronizedList():1 ] configureOptions[ setRequired():6 addOption():6 build():6 hasArg():6 builder():6 longOpt():6 desc():6 ] consumeAndValidate[ clientId():2 newFixedThreadPool():1 await():1 putIfAbsent():1 execute():1 shutdown():1 ] getWaltzClientConfig[ load():1 ] checkUncaughtExceptions[ isEmpty():1 toString():1 append():1 ] getUsage[ buildUsage():1 getOptions():1 ] ,"waltz-tools/src/main/java/com/wepay/waltz/tools/client/ClientCli.java: [Change Variable Type(8), Rename Variable(4), Move Class(2), Add Class Modifier(2), Add Method Modifier(2), Move Method(2)]"
com.wepay.waltz.client.internal.network.WaltzNetworkClient$WaltzClientHandlerCallbacksImpl,innerclass,87 -> 88,0d7623fb7ff7145354e6462e7a7765c926f4dbfb -> 5ab1197a1072c6a26c28e9b28f87ecf415d92ae6,0,0,0,2,9.0,9.0,1.0,1.0,78.0,66.0,129.0,118.0,0.0,0.0,24.0,19.0,34.0,30.0,onFeedSuspended[ getPartition():1 debug():1 sendMessage():1 isDebugEnabled():1 clientHighWaterMark():1 ] onChannelActive[ onMountingPartition():1 values():1 ] onExceptionCaught[  ] onWritabilityChanged[  ] onPartitionNotReady[ sleep():1 getPartition():1 debug():1 sendMessage():1 nextReqId():1 isDebugEnabled():1 clientHighWaterMark():1 info():1 ] onTransactionDataReceived[ transactionDataReceived():1 getPartition():1 debug():1 isDebugEnabled():1 ] onLockFailed[ partitionId():2 getPartition():1 debug():1 lockFailed():1 isDebugEnabled():1 ] onChannelInactive[ closeAsync():1 ] onTransactionIdReceived[ partitionId():2 getPartition():1 debug():1 applyTransaction():1 isDebugEnabled():1 ] onFlushCompleted[ partitionId():2 getPartition():1 debug():1 isDebugEnabled():1 flushCompleted():1 ] onPartitionMounted[ debug():1 get():1 sendMessage():1 isDebugEnabled():1 mounted():1 clientHighWaterMark():1 ] ,waltz-client/src/main/java/com/wepay/waltz/client/internal/network/WaltzNetworkClient.java: [Extract Method(7)]
com.wepay.waltz.tools.client.ClientCli$Validate$ProducerThread,innerclass,43 -> 46,ec7c0e75e0643decbe0c592b4e33fcddb20d966f -> b12f4dc996ea4e21aa506141a730c9d480229638,0,0,0,10,4.0,4.0,1.0,1.0,0.0,0.0,30.0,29.0,0.0,0.0,7.0,6.0,4.0,4.0,ProducerThread[  ] run[ await():2 close():2 sleep():1 clientId():1 submit():1 nextExponentialDistributedInterval():1 ] ,"waltz-tools/src/main/java/com/wepay/waltz/tools/client/ClientCli.java: [Rename Parameter(12), Replace Attribute With Variable(8), Rename Variable(4), Extract Attribute(3), Remove Parameter(3), Rename Attribute(2)] waltz-tools/src/test/java/com/wepay/waltz/tools/client/ClientCliTest.java: [Extract Method(10), Extract Variable(3)]"
com.wepay.waltz.tools.client.ClientCli$DummyTxnCallbacks,innerclass,186 -> 187,dea8b81530a11497b4a0fd1682f7535378a14963 -> 89567412acc6d91939f01d6d870859c5ecb5dd08,1,0,1,1,3.0,2.0,1.0,1.0,1.0,3.0,17.0,9.0,0.0,0.0,1.0,0.0,2.0,3.0,applyTransaction[  ] uncaughtException[  ] getClientHighWaterMark[  ] ,waltz-tools/src/main/java/com/wepay/waltz/tools/client/ClientCli.java: [Move Method(6)]
